webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,i){t.exports=i("NHnr")},"0dF4":function(t,e){},1:function(t,e){},"1c1D":function(t,e){},"5cA5":function(t,e){},"62sA":function(t,e){},Gd7a:function(t,e){},LBCD:function(t,e){},MjAm:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("/5sW"),r={name:"header-container",data:function(){return{menuShow:!1}},methods:{showMenu:function(){this.$store.commit("showLoader",!0)},openProfile:function(){this.$store.commit("showProfile")},logout:function(){var t=this;this.menuShow=!1,this.$http.get("../api/logout").then(function(e){t.$store.commit("username","")})}},computed:{username:function(){return this.$store.state.username},performerID:function(){return this.$store.state.myPerformerID}}},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-conteiner"},[i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("router-link",{attrs:{to:"/"}},[i("div",{staticClass:"name"},[t._v("\n                    BoysBand\n                ")])]),i("div",{staticClass:"management"},[""!=t.username?i("div",[i("div",{staticClass:"drop-menu row",on:{mouseenter:function(e){t.menuShow=!t.menuShow},mouseleave:function(e){t.menuShow=!t.menuShow}}},[i("span",[t._v(t._s(t.username))]),i("img",{staticClass:"user",attrs:{title:"загрузить",src:"/static/mainapp/images/user.svg",alt:"user"}}),t.menuShow?i("ul",{staticClass:"menu-drop"},[i("li",[i("router-link",{attrs:{to:"/performers/"+t.performerID}},[t._v("Профиль")])],1),i("li",[i("a",{on:{click:t.logout}},[t._v("Выйти")])])]):t._e()]),i("img",{staticClass:"uploadButton",attrs:{src:"/static/mainapp/images/download.svg",alt:"loader"},on:{click:t.showMenu}})]):i("div",[i("router-link",{attrs:{to:"/login"}},[t._v("Войти")]),i("router-link",{attrs:{to:"/register"}},[t._v("Регистрация")])],1)])],1)])])},o=[],a=i("XyMi");function l(t){i("kJmn")}var c=!1,u=l,h="data-v-8d633328",d=null,m=Object(a["a"])(r,n,o,c,u,h,d),p=m.exports,f={name:"profile",data:function(){return{albums:[],likes:[],error:!1,name:"",logo:null,description:""}},watch:{$route:"receiveData"},created:function(){this.receiveData()},computed:{performerID:function(){return this.$store.state.performer.performerID},myPerformerID:function(){return this.$store.state.myPerformerID}},methods:{playAlbum:function(t){for(var e=1;e<t.length;e++)this.$bus.$emit("track-to-queue",t[e]);this.$bus.$emit("play-track",t[0])},deleteTrack:function(t,e){var i=this;this.$http.delete("../api/tracks/"+this.albums[t].tracks[e].id,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(s){i.albums[t].tracks.splice(e,1)})},deleteAlbum:function(t){var e=this;this.$http.delete("../api/albums/"+this.albums[t].id,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(i){e.albums.splice(t,1)})},receiveData:function(){var t=this.$route.params.id;this.$http.get("../api/performers/"+t).then(function(t){this.albums=t.body.albums,this.$store.commit("performerID",t.body.id),this.name=t.body.name_per,this.logo=t.body.image_per+"?"+Math.random(),this.description=t.body.about_per,this.error=!1},function(t){this.error=!0}),this.$http.get("../api/likes",{params:{performer:t}}).then(function(t){this.likes=[];for(var e=0;e<t.body.length;e++)this.likes.push({name:t.body[e].name_trc,performer:t.body[e].name_per,logo:t.body[e].image_alb,id:t.body[e].trc_id})})},backgroundImage:function(t){return"background-image: url("+t+")"},nastrClick:function(){this.logo=""},toQueueClick:function(t){this.$bus.$emit("track-to-queue",{id:t})},playClick:function(t){this.$bus.$emit("play-track",{id:t})}}},g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ProfileConteiner",attrs:{id:"body"}},[i("div",{staticClass:"profile"},[t.error?i("div",{staticClass:"error-cont profile-row"},[t._m(0)]):t._e(),t.error?t._e():i("div",[i("div",{staticClass:"profile-row"},[i("div",{staticClass:"leftColumn"},[i("div",{staticClass:"ProfileLable Lblock"},[i("img",{staticClass:"ProfileImg",attrs:{src:t.logo,alt:"аватарка"}}),t.myPerformerID===t.performerID?i("router-link",{attrs:{to:"/settings"}},[i("div",{staticClass:"ProfileNastr",on:{click:t.nastrClick}},[i("label",[t._v("Настройки")]),i("img",{attrs:{src:"/static/mainapp/images/settings-cogwheel-button.svg",alt:"настройки"}})])]):t._e()],1),i("div",{staticClass:"LikeMusic Lblock"},[i("label",{attrs:{title:"Понравившаяся музыка"}},[t._v("Понравившаяся музыка("+t._s(t.likes.length)+")")]),i("hr"),t._l(t.likes,function(e,s){return i("div",{key:s,staticClass:"likedMusic",on:{click:function(i){t.playClick(e.id)}}},[i("div",{staticClass:"musicLable",style:t.backgroundImage(e.logo)}),i("div",{staticClass:"musicLablecontrol",staticStyle:{"background-image":"url(/static/mainapp/images/play-arrow.svg)"}}),t._v("\n                        "+t._s(e.performer)+" - "+t._s(e.name)+"\n                    ")])})],2)]),i("div",{staticClass:"rightColumn"},[i("div",{staticClass:"ProfileName Rblock"},[i("label",[t._v(t._s(t.name))])]),i("div",{staticClass:"ProfileDescription Rblock"},[i("label",[t._v("Описание")]),i("p",[t._v(t._s(t.description))])]),i("div",{staticClass:"MyAlbums Rblock"},[i("label",[t._v("Издания")]),t._l(t.albums,function(e,s){return i("div",{key:s,staticClass:"MyAlbums-conteiner"},[i("div",{staticClass:"MyAlbum"},[i("img",{staticClass:"MyAlbum-lable",attrs:{src:e.image_alb,alt:"настройки"}}),i("div",{staticClass:"Albom-Description"},[i("span",{staticStyle:{width:"90%","overflow-x":"hidden"}},[t._v(" "+t._s(e.name_alb))]),i("img",{staticClass:"albumDel",attrs:{title:"Удалить альбом",src:"/static/mainapp/images/closeDropdown.svg"},on:{click:function(e){t.deleteAlbum(s)}}}),i("div",{staticClass:"playAll",on:{click:function(i){t.playAlbum(e.tracks)}}},[i("img",{attrs:{src:"/static/mainapp/images/play-arrow.svg"}}),i("span",[t._v(" Проигрывать весь альбом ")])]),i("label",[t._v(" жанр: "+t._s(e.genre+" / "+e.style))]),i("label",[t._v(" дата выхода: "+t._s(e.date_alb))]),i("span",{staticClass:"more"},[t._v(" подробнее... ")])]),i("div",{staticClass:"MyAlbum-music"},[i("div",{staticClass:"Mymusic-conteiner"},t._l(e.tracks,function(e,r){return i("div",{key:r,staticClass:"MyMusic",on:{click:function(i){t.playClick(e.id)}}},[i("div",{staticClass:"MyMusiccontrol",staticStyle:{"background-image":"url(/static/mainapp/images/play-arrow.svg)"}}),i("div",{staticClass:"trackName",attrs:{title:e.name_trc}},[t._v("\n                                                "+t._s(e.name_trc)+"\n                                            ")]),i("div",{staticClass:"control"},[i("img",{staticClass:"MyMusiccontrol MyMusicDel",staticStyle:{float:"right"},attrs:{title:"Удалить композицию",src:"/static/mainapp/images/xiomi.png"},on:{click:function(e){t.deleteTrack(s,r)}}}),i("span",{staticStyle:{float:"right",position:"absolute",left:"27px","font-size":"80%"}},[t._v(t._s(e.likes))]),i("img",{staticClass:"liked",attrs:{src:"/static/mainapp/images/likeOren.svg"}})])])}))])])])})],2)])])])])])},v=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"error"},[i("img",{staticClass:"errorImg",attrs:{src:"/static/mainapp/images/Yoda.png",alt:""}}),i("label",[t._v(" Это не тот пользователь которого вы ищите")])])}];function y(t){i("uHbV")}var k=!1,b=y,w="data-v-46c299b1",x=null,_=Object(a["a"])(f,g,v,k,b,w,x),C=_.exports,S=(i("EuXz"),{name:"settings",data:function(){return{name:"",label:null,description:"",id:0,src:""}},watch:{myPerformerID:function(t){0!==t&&this.getData()}},created:function(){this.getData()},methods:{getData:function(){this.$http.get("../api/performers/"+this.myPerformerID).then(function(t){this.id=this.myPerformerID,this.name=t.data.name_per,this.src=t.data.image_per+"?"+Math.random(),this.description=t.data.about_per,document.getElementById("lable").style=""})},setLabel:function(t){t.preventDefault();var e=document.querySelector('img[alt="обложка"]'),i=document.querySelector('input[name="lable"]').files[0],s=new FileReader;this.label=t.target.files[0],s.onloadend=function(){e.src=s.result,document.getElementById("lable").style.display="block"},i&&("image/jpeg"==t.target.files[0].type||"image/png"==t.target.files[0].type)?(s.readAsDataURL(i),this.imgStyle="Loaderimg"):(document.getElementById("lable").style.display="none",e.src="",this.$refs.fileInput.value="")},imit:function(){this.$refs.fileInput.click()},saveSettings:function(){var t=new FormData;t.append("name",this.name),t.append("label",this.label),t.append("description",this.description);var e=this;this.$http.put("../api/performers/"+this.id,t,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(t){this.$store.commit("performerLogo",""),e.$router.push("performers/"+e.myPerformerID)})}},computed:{myPerformerID:function(){return this.$store.state.myPerformerID}}}),T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nastr-conteiner"},[i("form",{attrs:{method:"POST"}},[i("div",{staticClass:"nastr-row"},[i("div",{staticClass:"mainNastr block"},[i("label",{staticStyle:{fontSize:"135%"}},[t._v("Настройки")]),i("hr"),i("div",{staticClass:"N-name str"},[i("label",{staticClass:"line"},[t._v("Ваше имя:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"N-name",maxlength:"40"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),i("div",{staticClass:"N-Lable str nastr-row",staticStyle:{padding:"15px 0"}},[i("label",{staticClass:"line"},[t._v("Аватар:")]),i("img",{staticClass:"lable",staticStyle:{display:"none"},attrs:{id:"lable",src:t.src,alt:"обложка"}}),i("label",{staticClass:"imit",on:{click:t.imit}},[t._v("Выберите фото")]),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",name:"lable",multiple:"",accept:"image/*"},on:{change:t.setLabel}})]),i("div",{staticClass:"N-Description str"},[i("label",{staticClass:"line"},[t._v("О себе:")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{type:"text",name:"N-Description",maxlength:"800"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._m(0),t._m(1),i("div",{staticClass:"N-subbmit block nastr-row"},[i("div",{staticClass:"str"},[i("div",{staticClass:"N-sub",attrs:{name:"sub"},on:{click:t.saveSettings}},[t._v(" Сохранить ")]),i("router-link",{attrs:{to:"/performers/"+t.myPerformerID}},[i("div",{staticClass:"Cancel",attrs:{type:"reset"}},[t._v("Отмена")])])],1)])])])])},$=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"N-vk block nastr-row",staticStyle:{display:"none"}},[i("label",{staticClass:"line"},[t._v("Привязка акканута к ВК:")]),t._v("\n                  ну а тут можно просто ссылку требовать в инпут \n              ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"N-style block nastr-row",staticStyle:{display:"none"}},[i("label",[t._v("Вид страницы")]),i("hr"),i("div",{staticClass:"str"},[i("label",{staticClass:"line"},[t._v("Фон профиля:")]),i("input",{attrs:{type:"file",name:"background",multiple:"",accept:"image/*"}})]),i("div",{staticClass:"str"},[i("label",{staticClass:"line"},[t._v("Цвет фона:")]),i("input",{attrs:{type:"color"}})]),i("div",{staticClass:"str"},[i("label",{staticClass:"line"},[t._v("Любимый альбом:")]),t._v("\n                      поиск по всем альбомам\n                  ")])])}];function L(t){i("pR2j")}var E=!1,P=L,D="data-v-1a8ba71e",F=null,A=Object(a["a"])(S,T,$,E,P,D,F),I=A.exports,M=(i("qwQ3"),i("uDYd"),{name:"main-compilation",data:function(){return{compilation:[],compilations:[],genres:[],styles:[],url:"track?genre=all&sort=0",loading:!1,sort:"popular",genre:"",style:"",showsortbutton:!0,showStyles:!1,choseGenr:"",cock:0}},mounted:function(){document.body.addEventListener("scroll",this.onScroll,!1)},beforeDestroy:function(){document.body.removeEventListener("scroll",this.onScroll,!1)},methods:{showHer:function(t,e){this.cock=t,this.showGenre(e)},leftScrol:function(){document.getElementById("music-style").scrollLeft-=300},rightScrol:function(){document.getElementById("music-style").scrollLeft+=300},toPerformerPage:function(t){this.$router.push({name:"performer",params:{id:t}})},checkSort:function(t){t.preventDefault(),document.getElementById("time").style="background-color: rgba(192,192,192,0);border-bottom: none;line-height: 1",document.getElementById("topic").style="background-color: rgba(192,192,192,0);border-bottom: none;line-height: 1",t.target.style="background-color: rgba(192,192,192,0.8);border-bottom: 2px solid currentColor;line-height: 0.85;color: rgb(0,0,0)"},onScroll:function(t){var e=t.target,i=document.getElementById("main"),s=e.scrollTop,r=e.offsetHeight,n=i.offsetHeight,o=n-r;o<=s&&!this.loading&&null!=this.url&&this.showGenre()},showGenre:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0;var s={};null==t&&null==e||(this.url="api/tracks",this.compilations=[],null!=t&&(this.genre=t,this.choseGenr=t,isNaN(this.genre)?this.getGengeAndStyles():this.getGengeAndStyles(this.genre),this.style=null),null!=e&&(this.style=e,this.genre=null),null!=i&&(this.sort=i),"rec"===this.genre||"fav"===this.genre?this.showsortbutton=!1:this.showsortbutton=!0,s={params:{gen:this.genre,sty:this.style,sort:this.sort}}),this.$http.get(this.url,s).then(function(t){this.compilation=t.body.results;for(var e=0;e<this.compilation.length;e++)null===this.compilation[e].image_alb&&(this.compilation[e].image_alb="/static/mainapp/images/cat.jpg");if(this.compilations=this.compilations.concat(this.compilation),null!=t.body.next){var i=document.createElement("a");i.href=t.body.next,this.url=i.pathname+i.search}else this.url=null;this.loading=!1},function(t){this.loading=!1})},toQueueClick:function(t){this.$bus.$emit("track-to-queue",{id:this.compilations[t].id})},playClick:function(t){this.$bus.$emit("play-track",{id:this.compilations[t].id})},getGengeAndStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$http.get("api/genre",{params:{id:t}}).then(function(e){null==t?(this.genres=e.data,this.styles=null):this.styles=e.data,null!=this.styles&&0!=this.styles.length?this.showStyles=!0:this.showStyles=!1},function(t){})}},created:function(){this.showGenre("all"),this.getGengeAndStyles()}}),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"compilation-top"}},[i("div",{staticClass:"recommendations"},[i("div",{staticClass:"sortirovka-conteiner"},[i("div",{staticClass:"sortirovka"},[i("label",{staticClass:"sortirovka-name"},[t._v("Рекомендации")]),t.showsortbutton?i("div",{staticClass:"sort"},[i("label",[t._v("Отсортировать по:")]),i("span",{staticClass:"time",attrs:{id:"time"},on:{click:function(e){t.showGenre(t.genre,t.style,"time")},mousedown:t.checkSort}},[t._v("времени")]),i("span",{staticClass:"topic",attrs:{id:"topic"},on:{click:function(e){t.showGenre(t.genre,t.style,"popular")},mousedown:t.checkSort}},[t._v("популярности")])]):t._e()])]),i("div",{staticClass:"music-style-conteiner"},[i("img",{staticClass:"next",attrs:{id:"next",src:"/static/mainapp/images/left.png"},on:{click:t.leftScrol}}),i("div",{staticClass:"leftBevfore"}),i("div",{staticClass:"music-style",attrs:{id:"music-style"}},[i("a",{staticClass:"janr gen",class:{choseJanr:"all"===t.choseGenr},attrs:{name:""},on:{click:function(e){t.showGenre("all")}}},[t._v("Все")]),i("a",{staticClass:"janr gen",class:{choseJanr:"rec"===t.choseGenr},attrs:{name:""},on:{click:function(e){t.showGenre("rec")}}},[t._v("Рекомендации")]),i("a",{staticClass:"janr gen",class:{choseJanr:"fav"===t.choseGenr},attrs:{name:""},on:{click:function(e){t.showGenre("fav")}}},[t._v("Избранное")]),t._l(t.genres,function(e,s){return i("div",{key:s,staticClass:" janr",class:{choseJanr:t.choseGenr===e.id}},[i("a",{staticStyle:{"white-space":"nowrap"},attrs:{name:e.id},on:{click:function(i){t.showHer(s,e.id)}}},[t._v(t._s(e.name_gnr))])])})],2),i("img",{staticClass:"previous",attrs:{id:"previous",src:"/static/mainapp/images/right.png"},on:{click:t.rightScrol}}),i("div",{staticClass:"rightBevfore"})]),i("transition",{attrs:{name:"style"}},[t.showStyles?i("div",{staticClass:"janrStyles-conteiner"},[i("div",{staticClass:"janrStyles"},[i("a",{staticClass:"janr gen",staticStyle:{"white-space":"nowrap"},on:{click:function(e){t.showGenre(t.genres[t.cock].id)}}},[t._v("Все из "+t._s(t.genres[t.cock].name_gnr))]),t._l(t.styles,function(e,s){return i("div",{key:s,staticClass:" janr"},[i("a",{staticStyle:{"white-space":"nowrap"},attrs:{name:e.id},on:{click:function(i){t.showGenre(null,e.id)}}},[t._v(t._s(e.name_stl))])])})],2)]):t._e()])],1),i("div",{ref:"list",staticClass:"compilation convert"},t._l(t.compilations,function(e,s){return i("div",{key:s,staticClass:"music"},[i("div",{staticClass:"cover-cont"},[i("div",{staticClass:"play btn",on:{click:function(e){t.playClick(s)}}},[i("img",{attrs:{src:"/static/mainapp/images/playButton.svg",alt:"play",title:"воспроизвести"}})]),i("div",{staticClass:"turn btn",on:{click:function(e){t.toQueueClick(s)}}},[i("img",{attrs:{src:"/static/mainapp/images/playlist.svg",alt:"tunr",title:"в очередь"}})]),i("div",{staticClass:"album btn",on:{click:function(e){t.toQueueClick(s)}}},[i("img",{attrs:{src:"/static/mainapp/images/album.svg",alt:"tunr",title:"перейти ко всему альбому"}})]),i("img",{staticClass:"cover",attrs:{src:e.image_alb,alt:"обложка"}}),i("img",{staticClass:"disk",attrs:{src:e.image_alb,alt:"disk"}})]),i("div",{staticClass:"name-cont"},[i("span",{staticClass:"group-name",attrs:{title:e.name_trc}},[t._v(t._s(e.name_trc))]),i("span",{staticClass:"music-name",on:{click:function(i){t.toPerformerPage(e.id_per)}}},[t._v(t._s(e.name_per))])])])}))])},V=[];function R(t){i("0dF4")}var B=!1,j=R,q="data-v-629bc02c",H=null,O=Object(a["a"])(M,N,V,B,j,q,H),W=O.exports,z={name:"performer-top",data:function(){return{compositors:[],performers:[],isHovered:!1,animation:"",showDiv:!0,isTimeout:!1,autoFlip:null}},watch:{showDiv:function(t){setTimeout(this.carousel,500,t)}},methods:{shuffle:function(t){for(var e,i,s=t.length-1;s>0;s--)e=Math.floor(Math.random()*(s+1)),i=t[e],t[e]=t[s],t[s]=i;return t},carousel:function(t){t?this.compositors[0]===this.performers[this.performers.length-1]?this.compositors[1]=this.performers[0]:this.compositors[1]===this.performers[this.performers.length-1]?this.compositors[1]=this.performers[1]:this.compositors[1]=this.performers[this.performers.indexOf(this.compositors[1])+2]:this.compositors[1]===this.performers[this.performers.length-1]?this.compositors[0]=this.performers[0]:this.compositors[0]===this.performers[this.performers.length-1]?this.compositors[0]=this.performers[1]:this.compositors[0]=this.performers[this.performers.indexOf(this.compositors[0])+2]},updatePosts:function(){if(!this.isTimeout){this.isTimeout=!0;var t=this;setTimeout(function(){t.isTimeout=!1},500),this.showDiv=!this.showDiv,this.animation="animation"}},show:function(t){if(!this.isTimeout){"next"===t?this.animation="animation":"prev"===t&&(this.animation="animation1"),this.isTimeout=!0;var e=this;setTimeout(function(){e.isTimeout=!1},500),this.showDiv=!this.showDiv,clearInterval(this.autoFlip),this.autoFlip=setInterval(this.updatePosts,7e3)}},mouseEnter:function(){this.isHovered=!0},mouseLeave:function(){this.isHovered=!1},showBest:function(){var t=this;this.$http.get("api/performers").then(function(e){t.performers=t.shuffle(e.data),t.compositors=[t.performers[0],t.performers[1]]})},goToPerformer:function(t){this.$router.push({path:"/performers/"+t})}},created:function(){this.showBest();var t=this;setTimeout(function(){t.autoFlip=setInterval(t.updatePosts,7e3)},3500)}},Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"performer-top",on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isHovered,expression:"isHovered"}],staticClass:"prev-button",on:{click:function(e){t.show("prev")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isHovered,expression:"isHovered"}],staticClass:"next-button",on:{click:function(e){t.show("next")}}}),i("div",{staticClass:"performers"},[i("transition",{attrs:{name:t.animation,mode:"in-out"}},[t.compositors[0]?i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDiv,expression:"showDiv"}],staticClass:"performer",on:{click:function(e){t.goToPerformer(t.compositors[0].id)}}},[i("label",{staticClass:"performer-text"},[t._v("\n                    Лучший исполнитель этого месяца\n                ")]),i("img",{staticClass:"performer-image",attrs:{src:t.compositors[0].image_per,alt:"обложка"}}),i("label",{staticClass:"performer-name"},[t._v(t._s(t.compositors[0].name_per))])]):t._e()]),i("transition",{attrs:{name:t.animation,mode:"out-in"}},[t.compositors[1]?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDiv,expression:"!showDiv"}],staticClass:"performer",on:{click:function(e){t.goToPerformer(t.compositors[1].id)}}},[i("label",{staticClass:"performer-text"},[t._v("\n                    Лучший исполнитель этого месяца\n                ")]),i("img",{staticClass:"performer-image",attrs:{src:t.compositors[1].image_per,alt:"обложка"}}),i("label",{staticClass:"performer-name"},[t._v(t._s(t.compositors[1].name_per))])]):t._e()])],1)])},G=[];function U(t){i("PDm9")}var X=!1,K=U,J="data-v-21193cd1",Y=null,Z=Object(a["a"])(z,Q,G,X,K,J,Y),tt=Z.exports,et={name:"music-top",data:function(){return{infotracks:{},animation:"",showDiv:!0,isTimeout:!1,autoFlip:null}},methods:{updatePosts:function(){if(!this.isTimeout){this.isTimeout=!0;var t=this;setTimeout(function(){t.isTimeout=!1},500),this.showDiv=!this.showDiv,this.animation="animation"}},show:function(t){if(!this.isTimeout){t&&("previous-page"==t.target.id?this.animation="animation":this.animation="animation1"),this.isTimeout=!0;var e=this;setTimeout(function(){e.isTimeout=!1},500),this.showDiv=!this.showDiv,clearInterval(this.autoFlip),this.autoFlip=setInterval(this.updatePosts,7e3)}},toQueueClick:function(t){this.$bus.$emit("track-to-queue",{id:t})},playClick:function(t){this.$bus.$emit("play-track",{id:t})},startFlipping:function(){clearInterval(this.autoFlip),this.autoFlip=setInterval(this.updatePosts,7e3)},stopFlipping:function(){clearInterval(this.autoFlip)}},created:function(){this.autoFlip=setInterval(this.updatePosts,7e3),this.$http.get("api/tracks",{params:{gen:"top"}}).then(function(t){this.infotracks=t.data,this.infotracks[0]&&this.$set(this.infotracks[0],"label","Лучший трек этого месяца"),this.infotracks[1]&&this.$set(this.infotracks[1],"label","Лучший трек этой недели")},function(t){})}},it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade",mode:"in-out"}},[i("div",{staticClass:"music-top",attrs:{id:"music-top"},on:{mouseenter:t.stopFlipping,mouseleave:t.startFlipping}},[i("div",{staticClass:"next-page",attrs:{id:"next-page"},on:{click:t.show}}),i("div",{staticClass:"previous-page",attrs:{id:"previous-page"},on:{click:t.show}}),i("transition",{attrs:{name:t.animation,mode:"in-out"}},[t.infotracks[0]?i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDiv,expression:"showDiv"}],staticClass:"infotrack"},[i("img",{staticClass:"img",attrs:{src:t.infotracks[0].image_alb,alt:"обложка"}}),i("div",{staticClass:"text"},[i("span",[t._v("Лучший трек этого месяца")]),i("p",[t._v(t._s(t.infotracks[0].name_per)+" "),i("br"),t._v(" "+t._s(t.infotracks[0].name_trc))]),i("div",{staticClass:"play btn",on:{click:function(e){t.playClick(t.infotracks[0].id)}}},[i("img",{staticClass:"playIm",attrs:{title:"Воспроизвести",src:"/static/mainapp/images/Wplay.svg",alt:"play"}})]),i("div",{staticClass:"turn btn",on:{click:function(e){t.toQueueClick(t.infotracks[0].id)}}},[i("img",{staticClass:"turnIm",attrs:{title:"В очередь",src:"/static/mainapp/images/Wplaylist.svg",alt:"turn"}})]),i("p",[t._v("Понравилась: "+t._s(t.infotracks[0].rating_trc)+" пользователям")]),i("P",[t._v("Жанр: "+t._s(t.infotracks[0].name_gnr)+" / "+t._s(t.infotracks[0].name_stl))])],1)]):t._e()]),i("transition",{attrs:{name:t.animation,mode:"out-in"}},[t.infotracks[1]?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDiv,expression:"!showDiv"}],staticClass:"infotrack"},[i("img",{staticClass:"img",attrs:{src:t.infotracks[1].image_alb,alt:"обложка"}}),i("div",{staticClass:"text"},[i("span",[t._v("Лучший трек этой недели")]),i("p",[t._v(t._s(t.infotracks[1].name_per)+" "),i("br"),t._v(" "+t._s(t.infotracks[1].name_trc))]),i("div",{staticClass:"play btn",on:{click:function(e){t.playClick(t.infotracks[1].id)}}},[i("img",{staticClass:"playIm",attrs:{title:"Воспроизвести",src:"/static/mainapp/images/Wplay.svg",alt:"play"}})]),i("div",{staticClass:"turn btn",on:{click:function(e){t.toQueueClick(t.infotracks[1].id)}}},[i("img",{staticClass:"turnIm",attrs:{title:"В очередь",src:"/static/mainapp/images/Wplaylist.svg",alt:"turn"}})]),i("p",[t._v("Понравилась: "+t._s(t.infotracks[1].rating_trc)+" пользователям")]),i("P",[t._v("Жанр: "+t._s(t.infotracks[1].name_gnr)+" / "+t._s(t.infotracks[1].name_stl))])],1)]):t._e()])],1)])},st=[];function rt(t){i("tOrc")}var nt=!1,ot=rt,at="data-v-74bd50d2",lt=null,ct=Object(a["a"])(et,it,st,nt,ot,at,lt),ut=ct.exports,ht={name:"main-compilation",components:{compilationTop:W,performerTop:tt,musicTop:ut},data:function(){return{message:"сообщение",hoverClass:"disk"}},methods:{}},dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main",attrs:{id:"main"}},[i("div",{staticClass:"topics-conteiner"},[i("div",{staticClass:"topics"},[i("music-top"),i("performer-top")],1)]),i("compilation-top"),i("footer",[t._v("\n          ©Отвратительные мужики\n      ")])],1)},mt=[];function pt(t){i("RulV")}var ft=!1,gt=pt,vt="data-v-b5caddfa",yt=null,kt=Object(a["a"])(ht,dt,mt,ft,gt,vt,yt),bt=kt.exports,wt=(i("9Yib"),i("A0n/"),i("fx22"),i("VjuZ"),i("mJx5"),{name:"loader",directives:{focus:{inserted:function(t){t.focus()}}},data:function(){return{track_name_loader:"",photo:"",track:[],errorMessage:"",src:"",imgStyle:"camera",loaderStyle:"track-upload",currentEdit:null,trackName:"",janr:"Выбрать жанр",genreID:"",show:!1,menuIndex:null,pointerEvents:"pointerEvents",dragging:0,dropbox:null,dropAll:null,menuItems:[],loader:!1}},mounted:function(){this.dropbox=document.getElementById("dropbox"),this.dropAll=document.getElementById("body"),this.dropAll.addEventListener("dragover",this.dragoverAll,!1),this.dropAll.addEventListener("dragleave",this.dragleaveAll,!1),this.dropAll.addEventListener("dragenter",this.dragenterAll,!1),this.dropbox.addEventListener("dragenter",this.dragenter,!1),this.dropbox.addEventListener("dragover",this.dragover,!1),this.dropbox.addEventListener("dragleave",this.dragleave,!1),this.dropbox.addEventListener("drop",this.drop,!1)},beforeDestroy:function(){this.dropAll.removeEventListener("dragover",this.dragoverAll,!1),this.dropAll.removeEventListener("dragleave",this.dragleaveAll,!1),this.dropAll.removeEventListener("dragenter",this.dragenterAll,!1),this.dropbox.removeEventListener("dragenter",this.dragenter,!1),this.dropbox.removeEventListener("dragover",this.dragover,!1),this.dropbox.removeEventListener("dragleave",this.dragleave,!1),this.dropbox.removeEventListener("drop",this.drop,!1)},methods:{playNow:function(t){t.trc_id&&this.$bus.$emit("play-track",{id:t.trc_id})},genresButtonClick:function(){var t=this;this.show=!this.show,0===this.menuItems.length&&this.$http.get("api/genre").then(function(e){e.body.forEach(t.genresIterator)})},genresIterator:function(t,e,i){this.$set(this.menuItems,e,{name:t.name_gnr,id:t.id,children:[]})},genreClick:function(t){var e=this;this.menuIndexfunc(t),0===this.menuItems[t].children.length&&this.$http.get("api/genre",{params:{id:this.menuItems[t].id}}).then(function(t){t.body.forEach(e.stylesIterator)})},stylesIterator:function(t,e,i){this.$set(this.menuItems[this.menuIndex].children,e,{name:t.name_stl,id:t.id})},dragenter:function(t){t.stopPropagation(),t.preventDefault(),this.loaderStyle="track-upload-drop2",t.dataTransfer.dropEffect="copy"},dragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",this.loaderStyle="track-upload-drop2",this.dragoverdrop(t)},dragoverdrop:function(t){t.stopPropagation(),t.preventDefault(),dropAll.style.pointerEvents="all",vm.loaderStyle="track-upload"},dragleaveAll:function(t){t.stopPropagation(),t.preventDefault(),this.dragging--,0===this.dragging&"track-upload-drop2"!=this.loaderStyle&&(this.loaderStyle="track-upload",this.dropAll.style.pointerEvents="all")},dragoverAll:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="none"},dragenterAll:function(t){t.stopPropagation(),t.preventDefault(),this.dragging++,this.dropAll.style.pointerEvents="none",t.dataTransfer.dropEffect="none",this.loaderStyle="track-upload-drop"},dragleave:function(t){t.stopPropagation(),t.preventDefault(),"track-upload-drop2"===this.loaderStyle&&(this.loaderStyle="track-upload",this.dropAll.style.pointerEvents="all")},drop:function(t){t.stopPropagation(),t.preventDefault(),this.dropAll.style.pointerEvents="all",this.loaderStyle="track-upload";var e=t.dataTransfer,i=e.files;document.getElementById("add").files=i,this.dragoverdrop(t)},close:function(){this.$store.commit("showLoader",!1)},sync_photo:function(t){t.preventDefault();var e=document.querySelector('img[alt="обложка"]'),i=document.querySelector('input[name="photo"]').files[0],s=new FileReader;this.errorMessage="",this.photo=t.target.files[0],s.onloadend=function(){e.src=s.result},i?"image/jpeg"==t.target.files[0].type||"image/png"==t.target.files[0].type?(s.readAsDataURL(i),this.imgStyle="Loaderimg"):(e.src="/static/mainapp/images/camera.svg",this.imgStyle="camera",this.errorMessage="формат картинки только jpg"):(e.src="/static/mainapp/images/camera.svg",this.imgStyle="camera")},sync_track:function(t){t.preventDefault();for(var e=0;e<t.target.files.length;e++){if(!(this.track.length<20)){this.errorMessage="был превышен лимит";break}if("mp3"==t.target.files[e].name.split(".").pop()){this.errorMessage="";var i={name:t.target.files[e].name.replace(/\.[^.]+$/,""),file:t.target.files[e]};this.track.push(i)}else this.errorMessage="формат музыки только mp3"}this.$refs.add.value=""},track_Name:function(t){t.preventDefault(),this.track[this.currentEdit].name.length<1&&(this.errorMessage="название трека не может быть пустым",this.track[this.currentEdit].name=this.trackName)},send:function(){var t=this,e=this.track_name_loader,i=this.track,s=(this.photo,new FormData);if(s.append("photo",this.photo),s.append("name",this.track_name_loader),s.append("gen_id",this.genreID),e&&i){this.errorMessage="",this.loader=!0;var r=this;this.$http.post("api/albums",s,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(e){t.loader=!1;var s=!0,n=!1,o=void 0;try{for(var a,l=i[Symbol.iterator]();!(s=(a=l.next()).done);s=!0){var c=a.value,u=new FormData;u.append("track",c.file),u.append("track_name",c.name),u.append("album",e.body.alb_id),u.append("index",i.indexOf(c)),r.$set(r.track[r.track.indexOf(c)],"loading",!0),t.$http.post("api/tracks",u,{headers:{"X-CSRFToken":t.$root.csrftoken}}).then(function(t){r.track[t.body.index].loading=!1,r.$set(r.track[t.body.index],"trc_id",t.body.id)})}}catch(t){n=!0,o=t}finally{try{s||null==l.return||l.return()}finally{if(n)throw o}}})}else this.errorMessage="Ты в пиве",console.log("errorMessage=",this.errorMessage)},imit:function(){this.$refs.fileInput.click()},deleteTrack:function(t){this.track.splice(t,1)},upgradeName:function(t){this.currentEdit=t,this.trackName=this.track[this.currentEdit].name},setSelectedItem:function(t){this.selectedDropdown=t},menuIndexfunc:function(t){null===this.menuIndex||t!=this.menuIndex?this.menuIndex=t:this.menuIndex=null},chooseJanr:function(t,e){this.show=!this.show,this.janr=t,this.genreID=e}}}),xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loader-conteiner",attrs:{id:"loader-conteiner"}},[i("header",{staticClass:"Loaderheader"},[i("span",[t._v("Загрузка музыкального издания")]),i("img",{staticClass:"esc",attrs:{src:"/static/mainapp/images/whiteClose.png"},on:{click:t.close}})]),i("form",{attrs:{method:"POST"}},[i("div",{staticClass:"track-img-loader-conteiner"},[i("label",[t._v("Обложка")]),i("img",{class:t.imgStyle,attrs:{src:"/static/mainapp/images/camera.svg",alt:"обложка"},on:{click:t.imit}})]),i("div",{staticClass:"track-name-loader-conteiner"},[i("label",{attrs:{for:"track-name-loader"}},[t._v("Название*")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.track_name_loader,expression:"track_name_loader"}],staticClass:"track-name-loader",attrs:{type:"text",name:"track-name-loader",placeholder:"",maxlength:"40"},domProps:{value:t.track_name_loader},on:{input:function(e){e.target.composing||(t.track_name_loader=e.target.value)}}})]),i("div",{staticClass:"track-janr-loader-conteiner"},[i("label",{attrs:{for:"track-janr-loader"}},[t._v("Жанр*")]),i("div",{staticClass:"Loaderjanr",on:{click:t.genresButtonClick}},[t._v(t._s(t.janr))]),t.show?i("ul",{staticClass:"janr-drop"},t._l(t.menuItems,function(e,s){return i("li",{key:s,on:{click:function(e){t.genreClick(s)}}},[t._v(t._s(e.name)+"\n                    "),t.menuIndex===s?i("ul",{staticClass:"janr-drop-menu"},t._l(e.children,function(e,s){return i("li",{key:s,on:{click:function(i){t.chooseJanr(e.name,e.id)}}},[t._v(" "+t._s(e.name)+"\n                        ")])})):t._e()])})):t._e()]),t._m(0),i("input",{ref:"fileInput",staticClass:"add",staticStyle:{display:"none"},attrs:{id:"photo",type:"file",name:"photo",accept:"image/*,image/jpeg"},on:{change:t.sync_photo}}),t._l(t.track,function(e,s){return i("div",{key:s,staticClass:"loader-tracks"},[!1===e.loading?i("img",{staticClass:"Loaderplay",attrs:{src:"/static/mainapp/images/playButton.svg",alt:"play"},on:{click:function(i){t.playNow(e)}}}):t._e(),t.currentEdit===s?i("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.name,expression:"tracks.name"}],staticClass:"track",attrs:{id:"input",type:"text",maxlength:"30"},domProps:{value:e.name},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.currentEdit=null},change:t.track_Name,blur:function(e){t.currentEdit=null},input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}}):i("div",{staticClass:"track",staticStyle:{cursor:"pointer"},on:{click:function(e){t.upgradeName(s)}}},[t._v(t._s(e.name))]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"tracks.loading"}],staticClass:"Loaderplay"},[t._m(1,!0)]),t.currentEdit===s?i("img",{staticClass:"edit",attrs:{src:"/static/mainapp/images/forward.png"},on:{mousedown:function(e){t.currentEdit=null}}}):i("img",{staticClass:"edit",attrs:{src:"/static/mainapp/images/edit.png"},on:{mousedown:function(e){t.upgradeName(s)}}}),i("img",{staticClass:"del",attrs:{src:"/static/mainapp/images/xiomi.png"},on:{click:function(e){t.deleteTrack(s)}}}),i("hr",{staticClass:"HRloader"})])}),i("div",{staticClass:"add",class:t.loaderStyle,staticStyle:{"pointer-events":"all"},attrs:{id:"dropbox"}},[i("label",[i("input",{ref:"add",staticStyle:{display:"none"},attrs:{id:"add",type:"file",name:"track",multiple:"",accept:"audio/mpeg"},on:{change:t.sync_track}}),t._v("\n                Добавить композиции\n            ")])]),i("div",{staticClass:"error",attrs:{id:"error"}},[i("label",[t._v(t._s(t.errorMessage)+" ")])]),this.track.length>0&""!=t.track_name_loader&"жанр"!=t.janr&!t.loader?i("button",{staticClass:"loader",attrs:{name:"loader"},on:{click:function(e){e.preventDefault(),t.send()}}},[t._v("Загрузить ")]):t._e()],2)])},_t=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"description-conteiner"},[i("label",{attrs:{for:"track-name-loader"}},[t._v("Описание")]),i("textarea",{attrs:{type:"text",name:"description",maxlength:"800"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"cssload-loader"},[i("span",{staticClass:"cssload-loader-inner"})])}];function Ct(t){i("x1HC")}var St=!1,Tt=Ct,$t="data-v-3257ff20",Lt=null,Et=Object(a["a"])(wt,xt,_t,St,Tt,$t,Lt),Pt=Et.exports,Dt={name:"buttons",props:["isFull"],data:function(){var t={play:"/static/mainapp/images/playButton.svg",pause:"/static/mainapp/images/pauseButton.svg"},e={drop:"/static/mainapp/images/dropdown.svg",close:"/static/mainapp/images/closeDropdown.svg"};return{playSrcs:t,dropdownSrcs:e,playSrc:t.play,dropdownSrc:e.drop}},methods:{playClick:function(){this.$store.commit("switchPlaying")},prevClick:function(){this.$emit("prevclick")},nextClick:function(){this.$emit("nextclick")},dropdownClick:function(){this.$emit("dropdownclick")}},computed:{playing:function(){return this.$store.state.playing},isDragging:function(){return this.$store.state.isDragging}},watch:{playing:function(t){t||this.isDragging?this.playSrc=this.playSrcs.pause:this.playSrc=this.playSrcs.play},isFull:function(t){this.dropdownSrc=t?this.dropdownSrcs.close:this.dropdownSrcs.drop}}},Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{class:t.isFull?"full-previous-button":"previous-button",attrs:{src:"/static/mainapp/images/previousButton.svg",draggable:"false"},on:{click:t.prevClick}}),i("img",{class:t.isFull?"full-play-button":"play-button",attrs:{src:t.playSrc,draggable:"false"},on:{click:t.playClick}}),i("img",{class:t.isFull?"full-next-button":"next-button",attrs:{src:"/static/mainapp/images/nextButton.svg",draggable:"false"},on:{click:t.nextClick}}),i("img",{class:t.isFull?"full-dropdown-button":"dropdown-button",attrs:{src:t.dropdownSrc,draggable:"false"},on:{click:t.dropdownClick}})])},At=[];function It(t){i("LBCD")}var Mt=!1,Nt=It,Vt="data-v-27f476e8",Rt=null,Bt=Object(a["a"])(Dt,Ft,At,Mt,Nt,Vt,Rt),jt=Bt.exports,qt={name:"logos",props:["logoLink","nextLogoLink","prevLogoLink","isLiked","isFull"],data:function(){return{showLike:!1,showPrev:!1,rotationCSS:"",mainToPrevLogoAnimation:"",nextToMainLogoAnimation:"",mainLogoAnimation:"",prevEnvelopeAnimation:"",prevLogoAnimation:"",nextEnvelopeAnimation:"",nextLogoAnimation:"",audio:null,prevEnvelopeLogo:"",prevLogo:"",nextLogo:"",lastRotation:"",wasPlaying:!1,nextEnvelopeLogo:"",mainToPrevLogo:"",nextToMainLogo:"",isAnimating:!1}},computed:{currentTime:function(){return this.$store.state.currentTime},playing:function(){return this.$store.state.playing},isDragging:function(){return this.$store.state.isDragging}},created:function(){var t=this;this.$bus.$on("playingended",function(e){t.lastRotation=t.audio.currentTime/t.audio.duration*1080,t.wasPlaying=!0}),this.$bus.$on("startplaying",function(e){t.rotate(!1,0),t.wasPlaying&&(t.rotate(!1,.1/t.audio.duration*1080),setTimeout(t.rotate,100,!0,1080,t.audio.duration-t.audio.currentTime))}),this.$bus.$on("next-track-load",function(e){t.lastRotation=t.audio.currentTime/t.audio.duration*1080,t.wasPlaying=t.playing,t.isAnimating=!0,t.nextLogo=e.nextLogoLink,t.mainToPrevLogo=e.prevLogoLink,t.nextToMainLogo=e.logoLink,t.prevEnvelopeLogo=e.prevLogoLink,t.nextEnvelopeAnimation={opacity:1,transition:"opacity 0.1s"},t.nextLogoAnimation="visibility: hidden;",t.mainLogoAnimation="visibility: hidden;",t.mainToPrevLogoAnimation="transform: rotate("+t.lastRotation+"deg);",setTimeout(t.startAnimation,100)}),this.$bus.$on("prev-click",function(e){t.lastRotation=t.audio.currentTime/t.audio.duration*1080,t.wasPlaying=t.playing,t.isAnimating=!0,t.nextToMainLogo=e.logoLink,t.mainToPrevLogo=e.nextLogoLink,t.nextEnvelopeLogo=e.nextLogoLink,t.prevLogo=e.prevLogoLink,t.prevEnvelopeAnimation={opacity:1,transition:"opacity 0.1s",top:"100px"},t.prevLogoAnimation="visibility: hidden;",t.mainLogoAnimation="visibility: hidden;",t.mainToPrevLogoAnimation="transform: rotate("+t.lastRotation+"deg); left: unset; right: 165px;",t.nextToMainLogoAnimation={right:"unset",left:"-75px",transition:null,top:null,height:null,width:null},t.nextEnvelopeAnimation={top:"0"},setTimeout(t.startBackwardsAnimation,100)})},mounted:function(){this.audio=document.getElementById("audio")},watch:{isDragging:function(t){t||(this.rotate(!1,(this.audio.currentTime+.1)/this.audio.duration*1080),setTimeout(this.updateRotation,100,!0))},currentTime:function(t){this.isDragging&&this.isFull&&this.rotate(!1,t/this.audio.duration*1080)},isLiked:function(t){this.showLike=t},prevLogo:function(t){this.showPrev=""!==t},isFull:function(t){t?(this.rotate(!1,(this.audio.currentTime+(this.playing?.1:0))/this.audio.duration*1080),this.playing&&setTimeout(this.rotate,100,!0,1080,this.audio.duration-this.audio.currentTime)):this.rotationCSS=""},playing:function(t){this.isDragging||("transform: rotate(0deg);"!=this.rotationCSS?this.updateRotation(t):(this.rotate(!1,.1/this.audio.duration*1080),setTimeout(this.updateRotation,100,t)))}},methods:{prepareForImmediateAnimating:function(){this.isAnimating=!0,this.nextLogoAnimation="visibility: hidden;",this.nextEnvelopeAnimation={opacity:1,transition:"opacity 0.1s"}},refresh:function(t){this.isAnimating||(this.nextEnvelopeLogo=t,this.nextLogo=t)},nextLogoClick:function(){this.$bus.$emit("queue-opened")},prevLogoClick:function(){this.$bus.$emit("history-opened")},startAnimation:function(){setTimeout(this.endAnimation,800),this.mainToPrevLogoAnimation+="left: -75px; height: 150px; width: 150px; top: 100px; transition: left 0.8s, height 0.3s, width 0.3s, top 0.3s;",this.nextToMainLogoAnimation={right:"165px",transition:"right 0.8s"},setTimeout(this.startExpandingNextToMain,500),this.prevEnvelopeAnimation={top:"100px",opacity:"1.0",transition:"top 0.3s, opacity 0.3s"},this.prevLogoAnimation="left: -200px; opacity: 0.0; transition: left 0.5s, opacity 0.5s;",this.nextLogoAnimation="right: -200px; opacity: 0.0; transition: all 0.0s",setTimeout(this.moveNextEnvelope,500)},startBackwardsAnimation:function(){setTimeout(this.endBackwardsAnimation,800),this.mainToPrevLogoAnimation+="right: -75px; height: 150px; width: 150px; top: 100px; transition: right 0.8s, height 0.3s, width 0.3s, top 0.3s;",this.nextToMainLogoAnimation.left="165px",this.nextToMainLogoAnimation.transition="left 0.8s",setTimeout(this.startExpandingNextToMain,500),this.nextEnvelopeAnimation={top:"100px",opacity:"1.0",transition:"top 0.3s, opacity 0.3s"},this.nextLogoAnimation="right: -200px; opacity: 0.0; transition: right 0.5s, opacity 0.5s;",this.prevLogoAnimation="left: -200px; opacity: 0.0; transition: all 0.0s",setTimeout(this.movePrevEnvelopeBackwards,500)},endBackwardsAnimation:function(){this.prevEnvelopeLogo=this.prevLogoLink,this.nextLogo=this.nextLogoLink,this.mainToPrevLogoAnimation="visibility:hidden;",this.nextToMainLogoAnimation="visibility:hidden;",this.mainLogoAnimation="",this.nextEnvelopeAnimation.opacity=0,this.nextEnvelopeAnimation.transition="opacity 0.15s",setTimeout(this.hideNextEnvelopeBackwards,150),this.prevLogoAnimation="",this.nextLogoAnimation="",this.prevEnvelopeAnimation="visibility:hidden;"},endAnimation:function(){this.nextEnvelopeLogo=this.nextLogoLink,this.prevLogo=this.prevLogoLink,this.mainToPrevLogoAnimation="visibility:hidden;",this.nextToMainLogoAnimation="visibility:hidden;",this.mainLogoAnimation="",this.prevEnvelopeAnimation.opacity=0,this.prevEnvelopeAnimation.transition="opacity 0.15s",setTimeout(this.hidePrevEnvelope,150),this.prevLogoAnimation="",this.nextLogoAnimation="",this.nextEnvelopeAnimation="visibility:hidden;"},hideNextEnvelopeBackwards:function(){this.prevEnvelopeLogo=this.prevLogoLink,this.nextEnvelopeAnimation="visibility:hidden;",this.isAnimating=!1},hidePrevEnvelope:function(){this.prevEnvelopeLogo=this.prevLogoLink,this.prevEnvelopeAnimation="visibility:hidden;",this.isAnimating=!1},startExpandingNextToMain:function(){this.nextToMainLogoAnimation.transition+=", top 0.3s, height 0.3s, width 0.3s",this.nextToMainLogoAnimation.top="40px",this.nextToMainLogoAnimation.height="270px",this.nextToMainLogoAnimation.width="270px"},movePrevEnvelopeBackwards:function(){this.prevEnvelopeAnimation.top="0px",this.prevEnvelopeAnimation.opacity="0.0",this.prevEnvelopeAnimation.transition="all 0.3s",this.prevLogoAnimation="transition: left 0.5s, opacity 0.5s;"},moveNextEnvelope:function(){this.nextEnvelopeAnimation.top="0px",this.nextEnvelopeAnimation.opacity="0.0",this.nextEnvelopeAnimation.transition="all 0.3s",this.nextLogoAnimation="transition: right 0.5s, opacity 0.5s;"},click:function(){this.$emit("likepressed")},onMouseEnterMain:function(){!1===this.isLiked&&(this.showLike=!0)},onMouseLeaveMain:function(){!1===this.isLiked&&(this.showLike=!1)},updateRotation:function(t){this.isFull&&(t?this.rotate(!0,1080,this.audio.duration-this.audio.currentTime):this.rotate(!1,this.audio.currentTime/this.audio.duration*1080))},rotate:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.isFull&&(this.rotationCSS="transform: rotate("+e+"deg);"+(t?"transition: transform "+i+"s linear;":""))}}},Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.isFull?"full-main-logo":"main-logo",style:t.mainLogoAnimation,on:{click:t.click,mouseenter:t.onMouseEnterMain,mouseleave:t.onMouseLeaveMain}},[i("img",{class:t.isFull?"full-logo":"logo",style:t.rotationCSS,attrs:{src:t.logoLink,draggable:"false"}}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.showLike,expression:"showLike"}],class:t.isFull?"full-like":"like",attrs:{src:"/static/mainapp/images/like.svg",draggable:"false"}})]),i("img",{class:t.isFull?"full-main-to-prev-logo":"main-to-prev-logo",style:t.mainToPrevLogoAnimation,attrs:{src:t.mainToPrevLogo,draggable:"false"}}),i("img",{class:t.isFull?"full-next-to-main-logo":"next-to-main-logo",style:t.nextToMainLogoAnimation,attrs:{src:t.nextToMainLogo,draggable:"false"}}),i("img",{class:t.isFull?"full-prev-envelope":"prev-envelope",style:t.prevEnvelopeAnimation,attrs:{src:t.prevEnvelopeLogo,draggable:"false"}}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.showPrev,expression:"showPrev"}],class:t.isFull?"full-prev-logo":"prev-logo",style:t.prevLogoAnimation,attrs:{src:t.prevLogo,draggable:"false"},on:{click:t.prevLogoClick}}),i("img",{class:t.isFull?"full-next-logo":"next-logo",style:t.nextLogoAnimation,attrs:{src:t.nextLogo,draggable:"false"},on:{click:t.nextLogoClick}}),i("img",{class:t.isFull?"full-next-envelope":"next-envelope",style:t.nextEnvelopeAnimation,attrs:{src:t.nextEnvelopeLogo,draggable:"false"}})])},Ot=[];function Wt(t){i("kBSv")}var zt=!1,Qt=Wt,Gt="data-v-cdcdfb10",Ut=null,Xt=Object(a["a"])(qt,Ht,Ot,zt,Qt,Gt,Ut),Kt=Xt.exports,Jt={name:"menu-more",props:["performerID","isFull","isLiked"],data:function(){return{showMenu:!1,likeText:"Добавить в избранное"}},watch:{isLiked:function(t){this.likeText=t?"Удалить из избранного":"Добавить в избранное"}},computed:{trackID:function(){return this.$store.state.currentTrack.id}},methods:{toPerformerPage:function(){this.$router.push({name:"performer",params:{id:this.performerID}}),this.$emit("show-performer")},toggleDrop:function(){this.showMenu=!this.showMenu},closeDrop:function(){this.showMenu=!1},report:function(){this.$http.put("../api/report",{},{params:{track:this.trackID}}).then(function(t){this.showMenu=!1,alert("Вы отправили жалобу!\nСпасибо, что помогаете сделать наш сервис лучше:)")},function(t){alert("Вы уже отправляли жалобу:(")})}}},Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.isFull?"full-menu":"menu",on:{click:t.toggleDrop}},[i("img",{class:t.isFull?"full-menu-pic":"menu-pic",attrs:{src:"/static/mainapp/images/menu.svg",draggable:"false"}}),i("transition",{attrs:{name:"menu-more"}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"menu-dropdown",on:{mouseleave:t.closeDrop}},[i("li",{on:{click:t.toPerformerPage}},[i("p",{staticClass:"menuElements"},[t._v("На страницу исполнителя")])]),i("li",{on:{click:function(e){t.$emit("likepressed")}}},[i("p",{staticClass:"menuElements"},[t._v(t._s(t.likeText))])]),i("li",{on:{click:t.report}},[i("p",{staticClass:"menuElements"},[t._v("Пожаловаться")])])])])],1)},Zt=[];function te(t){i("jXvU")}var ee=!1,ie=te,se="data-v-91a050e4",re=null,ne=Object(a["a"])(Jt,Yt,Zt,ee,ie,se,re),oe=ne.exports,ae={name:"track-performer",props:["trackName","performerName","isFull","performerID"],methods:{toPerformerPage:function(){this.$router.push({name:"performer",params:{id:this.performerID}})}}},le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.isFull?"full-track-performer-name":"track-performer-name"},[i("p",{class:t.isFull?"full-track-name":"track-name"},[t._v(t._s(t.trackName))]),i("p",{class:t.isFull?"full-performer-name":"performer-name",on:{click:t.toPerformerPage}},[t._v(t._s(t.performerName))])])},ce=[];function ue(t){i("1c1D")}var he=!1,de=ue,me="data-v-37e70b42",pe=null,fe=Object(a["a"])(ae,le,ce,he,de,me,pe),ge=fe.exports,ve={name:"VueSliderComponent",props:{width:{type:[Number,String],default:"auto"},height:{type:[Number,String],default:6},data:{type:Array,default:null},dotSize:{type:Number,default:16},dotWidth:{type:Number,required:!1},dotHeight:{type:Number,required:!1},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number,default:1},show:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},piecewise:{type:Boolean,default:!1},tooltip:{type:[String,Boolean],default:"always"},eventType:{type:String,default:"auto"},direction:{type:String,default:"horizontal"},reverse:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},speed:{type:Number,default:.5},realTime:{type:Boolean,default:!1},stopPropagation:{type:Boolean,default:!1},value:{type:[String,Number,Array,Object],default:0},piecewiseLabel:{type:Boolean,default:!1},debug:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},processDragable:{type:Boolean,default:!1},useKeyboard:{type:Boolean,default:!1},actionsKeyboard:{type:Array,default:function(){return[function(t){return t-1},function(t){return t+1}]}},sliderStyle:[Array,Object,Function],focusStyle:[Array,Object,Function],tooltipDir:[Array,String],formatter:[String,Function],piecewiseStyle:Object,piecewiseActiveStyle:Object,processStyle:Object,bgStyle:Object,tooltipStyle:[Array,Object,Function],labelStyle:Object,labelActiveStyle:Object},data:function(){return{flag:!1,keydownFlag:null,focusFlag:!1,processFlag:!1,processSign:null,size:0,fixedValue:0,focusSlider:0,currentValue:0,currentSlider:0,isComponentExists:!0,widthWatcherInterval:null}},computed:{myCSS:function(){return"horizontal"==this.direction?"vue-slider-my":""},dotWidthVal:function(){return"number"===typeof this.dotWidth?this.dotWidth:this.dotSize},dotHeightVal:function(){return"number"===typeof this.dotHeight?this.dotHeight:this.dotSize},flowDirection:function(){return"vue-slider-".concat(this.direction+(this.reverse?"-reverse":""))},tooltipDirection:function(){var t=this.tooltipDir||("vertical"===this.direction?"left":"top");return Array.isArray(t)?this.isRange?t:t[1]:this.isRange?[t,t]:t},tooltipStatus:function(){return"hover"===this.tooltip&&this.flag?"vue-slider-always":this.tooltip?"vue-slider-".concat(this.tooltip):""},tooltipClass:function(){return["vue-slider-tooltip-".concat(this.tooltipDirection),"vue-slider-tooltip"]},isDisabled:function(){return"none"===this.eventType||this.disabled},disabledClass:function(){return this.disabled?"vue-slider-disabled":""},stateClass:function(){return{"vue-slider-state-process-drag":this.processFlag,"vue-slider-state-drag":this.flag&&!this.processFlag&&!this.keydownFlag,"vue-slider-state-focus":this.focusFlag}},isRange:function(){return Array.isArray(this.value)},slider:function(){return this.isRange?[this.$refs.dot0,this.$refs.dot1]:this.$refs.dot},minimum:function(){return this.data?0:this.min},val:{get:function(){return this.data?this.isRange?[this.data[this.currentValue[0]],this.data[this.currentValue[1]]]:this.data[this.currentValue]:this.currentValue},set:function(t){if(this.data)if(this.isRange){var e=this.data.indexOf(t[0]),i=this.data.indexOf(t[1]);e>-1&&i>-1&&(this.currentValue=[e,i])}else{var s=this.data.indexOf(t);s>-1&&(this.currentValue=s)}else this.currentValue=t}},currentIndex:function(){return this.isRange?this.data?this.currentValue:[(this.currentValue[0]-this.minimum)/this.spacing,(this.currentValue[1]-this.minimum)/this.spacing]:(this.currentValue-this.minimum)/this.spacing},indexRange:function(){return this.isRange?this.currentIndex:[0,this.currentIndex]},maximum:function(){return this.data?this.data.length-1:this.max},multiple:function(){var t="".concat(this.interval).split(".")[1];return t?Math.pow(10,t.length):1},spacing:function(){return this.data?1:this.interval},total:function(){return this.data?this.data.length-1:(Math.floor((this.maximum-this.minimum)*this.multiple)%(this.interval*this.multiple)!==0&&this.printError("Prop[interval] is illegal, Please make sure that the interval can be divisible"),(this.maximum-this.minimum)/this.interval)},gap:function(){return this.size/this.total},position:function(){return this.isRange?[(this.currentValue[0]-this.minimum)/this.spacing*this.gap,(this.currentValue[1]-this.minimum)/this.spacing*this.gap]:(this.currentValue-this.minimum)/this.spacing*this.gap},limit:function(){return this.isRange?this.fixed?[[0,(this.maximum-this.fixedValue*this.spacing)/this.spacing*this.gap],[(this.minimum+this.fixedValue*this.spacing)/this.spacing*this.gap,this.size]]:[[0,this.position[1]],[this.position[0],this.size]]:[0,this.size]},valueLimit:function(){return this.isRange?this.fixed?[[this.minimum,this.maximum-this.fixedValue*this.spacing],[this.minimum+this.fixedValue*this.spacing,this.maximum]]:[[this.minimum,this.currentValue[1]],[this.currentValue[0],this.maximum]]:[this.minimum,this.maximum]},idleSlider:function(){return 0===this.currentSlider?1:0},wrapStyles:function(){return"vertical"===this.direction?{height:"number"===typeof this.height?"".concat(this.height,"px"):this.height,padding:"".concat(this.dotHeightVal/2,"px ").concat(this.dotWidthVal/2,"px")}:{width:"number"===typeof this.width?"".concat(this.width,"px"):this.width}},sliderStyles:function(){return Array.isArray(this.sliderStyle)?this.isRange?this.sliderStyle:this.sliderStyle[1]:"function"===typeof this.sliderStyle?this.sliderStyle(this.val,this.currentIndex):this.isRange?[this.sliderStyle,this.sliderStyle]:this.sliderStyle},focusStyles:function(){return Array.isArray(this.focusStyle)?this.isRange?this.focusStyle:this.focusStyle[1]:"function"===typeof this.focusStyle?this.focusStyle(this.val,this.currentIndex):this.isRange?[this.focusStyle,this.focusStyle]:this.focusStyle},tooltipStyles:function(){return Array.isArray(this.tooltipStyle)?this.isRange?this.tooltipStyle:this.tooltipStyle[1]:"function"===typeof this.tooltipStyle?this.tooltipStyle(this.val,this.currentIndex):this.isRange?[this.tooltipStyle,this.tooltipStyle]:this.tooltipStyle},elemStyles:function(){return"vertical"===this.direction?{width:"".concat(this.width,"px"),height:"100%"}:{height:"".concat(this.height,"px")}},dotStyles:function(){return"vertical"===this.direction?{width:"".concat(this.dotWidthVal,"px"),height:"".concat(this.dotHeightVal,"px"),left:"".concat(-(this.dotWidthVal-this.width)/2,"px")}:{width:"".concat(this.dotWidthVal,"px"),height:"".concat(this.dotHeightVal,"px"),top:"".concat(-(this.dotHeightVal-this.height)/2,"px")}},piecewiseDotStyle:function(){return"vertical"===this.direction?{width:"".concat(this.width,"px"),height:"".concat(this.width,"px")}:{width:"".concat(this.height,"px"),height:"".concat(this.height,"px")}},piecewiseDotWrap:function(){if(!this.piecewise&&!this.piecewiseLabel)return!1;for(var t=[],e=0;e<=this.total;e++){var i="vertical"===this.direction?{bottom:"".concat(this.gap*e-this.width/2,"px"),left:0}:{left:"".concat(this.gap*e-this.height/2,"px"),top:0},s=this.reverse?this.total-e:e,r=this.data?this.data[s]:this.spacing*s+this.min;t.push({style:i,label:this.formatter?this.formatting(r):r,inRange:s>=this.indexRange[0]&&s<=this.indexRange[1]})}return t}},watch:{width:function(t){this.widthWatcherInterval=setInterval(this.widthWatcher,50)},value:function(t){this.flag||this.setValue(t,!0)},max:function(t){if(t<this.min)return this.printError("The maximum value can not be less than the minimum value.");var e=this.limitValue(this.val);this.setValue(e),this.refresh()},min:function(t){if(t>this.max)return this.printError("The minimum value can not be greater than the maximum value.");var e=this.limitValue(this.val);this.setValue(e),this.refresh()},show:function(t){var e=this;t&&!this.size&&this.$nextTick(function(){e.refresh()})},fixed:function(){this.computedFixedValue()}},methods:{widthWatcher:function(){this.size!==this.$refs.wrap.offsetWidth&&(this.refresh(),clearInterval(this.widthWatcherInterval))},bindEvents:function(){document.addEventListener("touchmove",this.moving,{passive:!1}),document.addEventListener("touchend",this.moveEnd,{passive:!1}),document.addEventListener("mousedown",this.blurSlider),document.addEventListener("mousemove",this.moving),document.addEventListener("mouseup",this.moveEnd),document.addEventListener("mouseleave",this.moveEnd),document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup),window.addEventListener("resize",this.refresh)},unbindEvents:function(){document.removeEventListener("touchmove",this.moving),document.removeEventListener("touchend",this.moveEnd),document.removeEventListener("mousedown",this.blurSlider),document.removeEventListener("mousemove",this.moving),document.removeEventListener("mouseup",this.moveEnd),document.removeEventListener("mouseleave",this.moveEnd),document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup),window.removeEventListener("resize",this.refresh)},handleKeydown:function(t){if(!this.useKeyboard||!this.focusFlag)return!1;switch(t.keyCode){case 37:case 40:t.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[0]);break;case 38:case 39:t.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[1]);break}},handleKeyup:function(){this.keydownFlag&&(this.keydownFlag=!1,this.flag=!1)},changeFocusSlider:function(t){var e=this;if(this.isRange){var i=this.currentIndex.map(function(i,s){if(s===e.focusSlider||e.fixed){var r=t(i),n=e.fixed?e.valueLimit[s]:[e.minimum,e.maximum];if(r<=n[1]&&r>=n[0])return r}return i});i[0]>i[1]&&(this.focusSlider=0===this.focusSlider?1:0,i=i.reverse()),this.setIndex(i)}else this.setIndex(t(this.currentIndex))},blurSlider:function(t){var e=this.isRange?this.$refs["dot".concat(this.focusSlider)]:this.$refs.dot;if(!e||e===t.target)return!1;this.focusFlag=!1},formatting:function(t){return"string"===typeof this.formatter?this.formatter.replace(/\{value\}/,t):this.formatter(t)},getPos:function(t){return this.realTime&&this.getStaticData(),"vertical"===this.direction?this.reverse?t.pageY-this.offset:this.size-(t.pageY-this.offset):this.reverse?this.size-(t.clientX-this.offset):t.clientX-this.offset},processClick:function(t){this.fixed&&t.stopPropagation()},wrapClick:function(t){if(this.isDisabled||!this.clickable||this.processFlag)return!1;var e=this.getPos(t);this.isRange&&(this.currentSlider=e>(this.position[1]-this.position[0])/2+this.position[0]?1:0),this.setValueOnPos(e,!0),this.moveStart()},moveStart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(this.isDisabled)return!1;if(this.stopPropagation&&t.stopPropagation(),this.isRange&&(this.currentSlider=e,i)){if(!this.processDragable)return!1;this.processFlag=!0,this.processSign={pos:this.position,start:this.getPos(t.targetTouches&&t.targetTouches[0]?t.targetTouches[0]:t)}}!i&&this.useKeyboard&&(this.focusFlag=!0,this.focusSlider=e),this.flag=!0,this.$emit("drag-start",this)},moving:function(t){if(this.stopPropagation&&t.stopPropagation(),!this.flag)return!1;t.preventDefault(),t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),this.processFlag?(this.currentSlider=0,this.setValueOnPos(this.processSign.pos[0]+this.getPos(t)-this.processSign.start,!0),this.currentSlider=1,this.setValueOnPos(this.processSign.pos[1]+this.getPos(t)-this.processSign.start,!0)):this.setValueOnPos(this.getPos(t),!0)},moveEnd:function(t){var e=this;if(this.stopPropagation&&t.stopPropagation(),!this.flag)return!1;this.$emit("drag-end",this),this.lazy&&this.isDiff(this.val,this.value)&&this.syncValue(),this.flag=!1,window.setTimeout(function(){e.processFlag=!1},0),this.setPosition()},setValueOnPos:function(t,e){var i=this.isRange?this.limit[this.currentSlider]:this.limit,s=this.isRange?this.valueLimit[this.currentSlider]:this.valueLimit;if(t>=i[0]&&t<=i[1]){this.setTransform(t);var r=(Math.round(t/this.gap)*(this.spacing*this.multiple)+this.minimum*this.multiple)/this.multiple;this.setCurrentValue(r,e),this.isRange&&this.fixed&&(this.setTransform(t+this.fixedValue*this.gap*(0===this.currentSlider?1:-1),!0),this.setCurrentValue(r+this.fixedValue*this.spacing*(0===this.currentSlider?1:-1),e,!0))}else t<i[0]?(this.setTransform(i[0]),this.setCurrentValue(s[0]),this.isRange&&this.fixed?(this.setTransform(this.limit[this.idleSlider][0],!0),this.setCurrentValue(this.valueLimit[this.idleSlider][0],e,!0)):this.fixed||1!==this.currentSlider||(this.focusSlider=0,this.currentSlider=0)):(this.setTransform(i[1]),this.setCurrentValue(s[1]),this.isRange&&this.fixed?(this.setTransform(this.limit[this.idleSlider][1],!0),this.setCurrentValue(this.valueLimit[this.idleSlider][1],e,!0)):this.fixed||0!==this.currentSlider||(this.focusSlider=1,this.currentSlider=1))},isDiff:function(t,e){return Object.prototype.toString.call(t)!==Object.prototype.toString.call(e)||(Array.isArray(t)&&t.length===e.length?t.some(function(t,i){return t!==e[i]}):t!==e)},setCurrentValue:function(t,e,i){var s=i?this.idleSlider:this.currentSlider;if(t<this.minimum||t>this.maximum)return!1;this.isRange?this.isDiff(this.currentValue[s],t)&&(this.currentValue.splice(s,1,t),this.lazy&&this.flag||this.syncValue()):this.isDiff(this.currentValue,t)&&(this.currentValue=t,this.lazy&&this.flag||this.syncValue()),e||this.setPosition()},setIndex:function(t){var e;Array.isArray(t)&&this.isRange?(e=this.data?[this.data[t[0]],this.data[t[1]]]:[this.spacing*t[0]+this.minimum,this.spacing*t[1]+this.minimum],this.setValue(e)):(t=this.spacing*t+this.minimum,this.isRange&&(this.currentSlider=t>(this.currentValue[1]-this.currentValue[0])/2+this.currentValue[0]?1:0),this.setCurrentValue(t))},setValue:function(t,e,i){var s=this;if(this.isDiff(this.val,t)){var r=this.limitValue(t);this.val=this.isRange?r.concat():r,this.computedFixedValue(),this.syncValue(e)}this.$nextTick(function(){return s.setPosition(i)})},computedFixedValue:function(){if(!this.fixed)return this.fixedValue=0,!1;this.fixedValue=this.currentIndex[1]-this.currentIndex[0]},setPosition:function(t){this.flag||this.setTransitionTime(void 0===t?this.speed:t),this.isRange?(this.setTransform(this.position[0],1===this.currentSlider),this.setTransform(this.position[1],0===this.currentSlider)):this.setTransform(this.position),this.flag||this.setTransitionTime(0)},setTransform:function(t,e){var i=e?this.idleSlider:this.currentSlider,s=("vertical"===this.direction?this.dotHeightVal/2-t:t-this.dotWidthVal/2)*(this.reverse?-1:1),r="vertical"===this.direction?"translateY(".concat(s,"px)"):"translateX(".concat(s,"px)"),n=this.fixed?"".concat(this.fixedValue*this.gap,"px"):"".concat(0===i?this.position[1]-t:t-this.position[0],"px"),o=this.fixed?"".concat(0===i?t:t-this.fixedValue*this.gap,"px"):"".concat(0===i?t:this.position[0],"px");this.isRange?(this.slider[i].style.transform=r,this.slider[i].style.WebkitTransform=r,this.slider[i].style.msTransform=r,"vertical"===this.direction?(this.$refs.process.style.height=n,this.$refs.process.style[this.reverse?"top":"bottom"]=o):(this.$refs.process.style.width=n,this.$refs.process.style[this.reverse?"right":"left"]=o)):(this.slider.style.transform=r,this.slider.style.WebkitTransform=r,this.slider.style.msTransform=r,"vertical"===this.direction?(this.$refs.process.style.height="".concat(t,"px"),this.$refs.process.style[this.reverse?"top":"bottom"]=0):(this.$refs.process.style.width="".concat(t,"px"),this.$refs.process.style[this.reverse?"right":"left"]=0))},setTransitionTime:function(t){if(t||this.$refs.process.offsetWidth,this.isRange){for(var e=0;e<this.slider.length;e++)this.slider[e].style.transitionDuration="".concat(t,"s"),this.slider[e].style.WebkitTransitionDuration="".concat(t,"s");this.$refs.process.style.transitionDuration="".concat(t,"s"),this.$refs.process.style.WebkitTransitionDuration="".concat(t,"s")}else this.slider.style.transitionDuration="".concat(t,"s"),this.slider.style.WebkitTransitionDuration="".concat(t,"s"),this.$refs.process.style.transitionDuration="".concat(t,"s"),this.$refs.process.style.WebkitTransitionDuration="".concat(t,"s")},limitValue:function(t){var e=this;if(this.data)return t;var i=function(i){return i<e.min?(e.printError("The value of the slider is ".concat(t,", the minimum value is ").concat(e.min,", the value of this slider can not be less than the minimum value")),e.min):i>e.max?(e.printError("The value of the slider is ".concat(t,", the maximum value is ").concat(e.max,", the value of this slider can not be greater than the maximum value")),e.max):i};return this.isRange?t.map(function(t){return i(t)}):i(t)},syncValue:function(t){var e=this.isRange?this.val.concat():this.val;this.$emit("input",e),t||this.$emit("callback",e)},getValue:function(){return this.val},getIndex:function(){return this.currentIndex},getStaticData:function(){this.$refs.elem&&(this.size="vertical"===this.direction?this.$refs.elem.offsetHeight:this.$refs.elem.offsetWidth,this.offset="vertical"===this.direction?this.$refs.elem.getBoundingClientRect().top+window.pageYOffset||document.documentElement.scrollTop:this.$refs.elem.getBoundingClientRect().left)},refresh:function(){this.$refs.elem&&(this.getStaticData(),this.computedFixedValue(),this.setPosition())},printError:function(t){this.debug&&console.error("[VueSlider error]: ".concat(t))}},mounted:function(){var t=this;if(this.isComponentExists=!0,"undefined"===typeof window||"undefined"===typeof document)return this.printError("window or document is undefined, can not be initialization.");this.$nextTick(function(){t.isComponentExists&&(t.getStaticData(),t.setValue(t.limitValue(t.value),!0,0),t.bindEvents())})},beforeDestroy:function(){this.isComponentExists=!1,this.unbindEvents()}},ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"wrap",class:["vue-slider-component",t.myCSS,t.flowDirection,t.disabledClass,t.stateClass,{"vue-slider-has-label":t.piecewiseLabel}],style:t.wrapStyles,on:{mousedown:t.wrapClick}},[i("div",{ref:"elem",staticClass:"vue-slider",style:[t.elemStyles,t.bgStyle],attrs:{"aria-hidden":"true"}},[t.isRange?[i("div",{ref:"dot0",class:[t.tooltipStatus,"vue-slider-dot",{"vue-slider-dot-focus":t.focusFlag&&0===t.focusSlider}],style:[t.dotStyles,t.sliderStyles[0],t.focusFlag&&0===t.focusSlider?t.focusStyles[0]:null],on:{mousedown:function(e){t.moveStart(e,0)},touchstart:function(e){t.moveStart(e,0)}}},[i("span",{class:["vue-slider-tooltip-"+t.tooltipDirection[0],"vue-slider-tooltip-wrap"]},[t._t("tooltip",[i("span",{staticClass:"vue-slider-tooltip",style:t.tooltipStyles[0]},[t._v(t._s(t.formatter?t.formatting(t.val[0]):t.val[0]))])],{value:t.val[0],index:0})],2)]),i("div",{ref:"dot1",class:[t.tooltipStatus,"vue-slider-dot",{"vue-slider-dot-focus":t.focusFlag&&1===t.focusSlider}],style:[t.dotStyles,t.sliderStyles[1],t.focusFlag&&1===t.focusSlider?t.focusStyles[1]:null],on:{mousedown:function(e){t.moveStart(e,1)},touchstart:function(e){t.moveStart(e,1)}}},[i("span",{class:["vue-slider-tooltip-"+t.tooltipDirection[1],"vue-slider-tooltip-wrap"]},[t._t("tooltip",[i("span",{staticClass:"vue-slider-tooltip",style:t.tooltipStyles[1]},[t._v(t._s(t.formatter?t.formatting(t.val[1]):t.val[1]))])],{value:t.val[1],index:1})],2)])]:[i("div",{ref:"dot",class:[t.tooltipStatus,"vue-slider-dot",{"vue-slider-dot-focus":t.focusFlag&&0===t.focusSlider}],style:[t.dotStyles,t.sliderStyles,t.focusFlag&&0===t.focusSlider?t.focusStyles:null],on:{mousedown:t.moveStart,touchstart:t.moveStart}},[i("span",{class:["vue-slider-tooltip-"+t.tooltipDirection,"vue-slider-tooltip-wrap"]},[t._t("tooltip",[i("span",{staticClass:"vue-slider-tooltip",style:t.tooltipStyles},[t._v(t._s(t.formatter?t.formatting(t.val):t.val))])],{value:t.val})],2)])],i("ul",{staticClass:"vue-slider-piecewise"},t._l(t.piecewiseDotWrap,function(e,s){return i("li",{key:s,staticClass:"vue-slider-piecewise-item",style:[t.piecewiseDotStyle,e.style]},[t._t("piecewise",[t.piecewise?i("span",{staticClass:"vue-slider-piecewise-dot",style:[t.piecewiseStyle,e.inRange?t.piecewiseActiveStyle:null]}):t._e()],{label:e.label,index:s,first:0===s,last:s===t.piecewiseDotWrap.length-1,active:e.inRange}),t._t("label",[t.piecewiseLabel?i("span",{staticClass:"vue-slider-piecewise-label",style:[t.labelStyle,e.inRange?t.labelActiveStyle:null]},[t._v("\r\n          "+t._s(e.label)+"\r\n        ")]):t._e()],{label:e.label,index:s,first:0===s,last:s===t.piecewiseDotWrap.length-1,active:e.inRange})],2)})),i("div",{ref:"process",class:["vue-slider-process",{"vue-slider-process-dragable":t.isRange&&t.processDragable}],style:t.processStyle,on:{click:t.processClick,mousedown:function(e){t.moveStart(e,0,!0)},touchstart:function(e){t.moveStart(e,0,!0)}}})],2),t.isRange||t.data?t._e():i("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"vue-slider-sr-only",attrs:{type:"range",min:t.min,max:t.max},domProps:{value:t.val},on:{__r:function(e){t.val=e.target.value}}})])},ke=[];function be(t){i("SHm9")}var we=!1,xe=be,_e="data-v-1d05fefe",Ce=null,Se=Object(a["a"])(ve,ye,ke,we,xe,_e,Ce),Te=Se.exports,$e={name:"volume-controller",components:{vueSliderComponent:Te},props:["isFull"],data:function(){var t={direction:"vertical",width:12,height:150,dotSize:20,speed:.3,tooltip:"hover"},e="/static/mainapp/images/",i={zero:e+"speaker0.svg",thirty3:e+"speaker33.svg",sixty6:e+"speaker66.svg",hundred:e+"speaker100.svg"};return{value:100,showVolume:!1,showFullVolume:!1,sliderprops:t,dragging:!1,mouseIn:!1,speakerPic:i.hundred,speakerPics:i,controlZoneStyle:"height: 59px;"}},watch:{value:function(t){localStorage.setItem("volume",this.value),this.$store.commit("volume",this.value),this.speakerPic=0===t?this.speakerPics.zero:t<=33?this.speakerPics.thirty3:t<=66?this.speakerPics.sixty6:this.speakerPics.hundred},isFull:function(){this.refreshFunc()}},created:function(){var t=localStorage.getItem("volume");t&&(this.value=Number(t))},methods:{clickSpeaker:function(){if(this.value>0)sessionStorage.setItem("volume",this.value),this.value=0;else{var t=Number(sessionStorage.getItem("volume"));this.value=0!==t?t:100}},refreshFunc:function(){this.$refs.slider.refresh()},mouseLeave:function(){this.mouseIn=!1,this.closeSpeaker()},mouseEnter:function(){this.mouseIn=!0},dragEnd:function(){this.dragging=!1,this.closeSpeaker()},dragStart:function(){this.dragging=!0},openSpeaker:function(){this.controlZoneStyle="",this.showVolume=!0,this.mouseIn=!0},closeSpeaker:function(){this.dragging||this.mouseIn||(this.showVolume=!1,this.controlZoneStyle="height: 59px;")}}},Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.isFull?"full-volume-control-zone":"volume-control-zone",style:t.isFull?"":t.controlZoneStyle,on:{mouseleave:t.mouseLeave}},[i("transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showVolume,expression:"showVolume"}],class:t.isFull?"full-volume":"volume"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showVolume,expression:"showVolume"}],staticClass:"volume-background"}),i("vue-slider-component",t._b({ref:"slider",attrs:{show:t.showVolume},on:{"drag-end":t.dragEnd,"drag-start":t.dragStart},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"vue-slider-component",t.sliderprops,!1))],1)]),i("img",{class:t.isFull?"full-speaker":"speaker",attrs:{src:t.speakerPic,draggable:"false"},on:{mouseenter:t.openSpeaker,click:t.clickSpeaker}})],1)])},Ee=[];function Pe(t){i("RmlQ")}var De=!1,Fe=Pe,Ae="data-v-b1b4f612",Ie=null,Me=Object(a["a"])($e,Le,Ee,De,Fe,Ae,Ie),Ne=Me.exports,Ve={name:"audio-player",props:["audioLink"],data:function(){return{isFirst:!0,timer:"",duration:0}},computed:{playing:function(){return this.$store.state.playing},isDragging:function(){return this.$store.state.isDragging},volume:function(){return this.$store.state.volume},newTime:{get:function(){return this.$store.state.currentTime}}},watch:{newTime:function(t){this.$store.state.isDragging&&(this.$refs.audio.currentTime=t)},playing:function(t){t?(this.$refs.audio.play(),this.timer=setInterval(this.updateProgress,500)):(clearInterval(this.timer),this.$refs.audio.pause())},volume:function(t){this.$refs.audio.volume=this.volume/100},isDragging:function(t){t||(this.$store.commit("playing",!0),this.$refs.audio.play())}},methods:{endPlaying:function(){this.$bus.$emit("playingended"),this.$emit("playingended")},startPlaying:function(){this.duration=this.$refs.audio.duration,this.$store.commit("duration",this.duration),this.updateProgress(),this.isFirst?this.isFirst=!1:(this.$store.commit("playing",!0),this.$refs.audio.play(),this.$bus.$emit("startplaying"))},updateProgress:function(){this.$store.state.isDragging||this.$store.commit("currentTime",this.$refs.audio.currentTime)}}},Re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("audio",{ref:"audio",attrs:{id:"audio",src:t.audioLink,preload:""},on:{loadeddata:t.startPlaying,ended:t.endPlaying}})},Be=[];function je(t){i("bO45")}var qe=!1,He=je,Oe="data-v-09ed2c59",We=null,ze=Object(a["a"])(Ve,Re,Be,qe,He,Oe,We),Qe=ze.exports,Ge=i("DAYN"),Ue=i.n(Ge),Xe={name:"queue",components:{draggable:Ue.a},props:["isFull"],created:function(){var t=this;this.$bus.$on("queue-opened",function(e){t.openQueue()}),this.$bus.$on("history-opened",function(e){t.openHistory()})},data:function(){return{showQueue:!1,showHistory:!1}},computed:{queueTracks:{get:function(){return this.$store.state.queueTracks},set:function(t){this.$store.commit("updateQueueTracks",t)}},historyTracks:function(){return this.$store.state.historyTracks}},watch:{isFull:function(t){t||this.hideLists()}},methods:{hideLists:function(){this.showQueue=!1,this.showHistory=!1},openQueue:function(){this.showQueue=!this.showQueue,this.showHistory=!1},openHistory:function(){this.showHistory=!this.showHistory,this.showQueue=!1}}},Ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.isFull?"full-queue":"queue"},[i("transition",{attrs:{name:"queue"}},[i("draggable",{directives:[{name:"show",rawName:"v-show",value:t.showQueue,expression:"showQueue"}],attrs:{options:{group:"people"}},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.queueTracks,callback:function(e){t.queueTracks=e},expression:"queueTracks"}},t._l(t.queueTracks,function(e,s){return i("div",{key:s,class:t.isFull?"full-queue-element":"queue-element"},[i("img",{class:t.isFull?"full-queue-img":"queue-img",attrs:{src:e.image_alb}}),i("span",{class:t.isFull?"full-queue-text":"queue-text",style:e.style},[t._v(t._s(e.name_trc))])])}))],1)],1),i("div",{class:t.isFull?"full-history":"history"},[i("transition",{attrs:{name:"history"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showHistory,expression:"showHistory"}],class:t.isFull?"full-queue-list":"queue-list"},t._l(t.historyTracks,function(e,s){return i("div",{key:s,class:t.isFull?"full-queue-element":"queue-element"},[i("img",{class:t.isFull?"full-queue-img":"queue-img",attrs:{src:e.image_alb}}),i("span",{class:t.isFull?"full-queue-text":"queue-text",style:e.style},[t._v(t._s(e.name_trc))])])}))])],1)])},Je=[];function Ye(t){i("Gd7a")}var Ze=!1,ti=Ye,ei="data-v-083e868e",ii=null,si=Object(a["a"])(Xe,Ke,Je,Ze,ti,ei,ii),ri=si.exports,ni={name:"progress-bar",components:{vueSliderComponent:Te},props:["isPlayerHovered","isFull"],data:function(){return{lastValue:0,sliderPropsFull:{width:750,height:20,"dot-height":20,"dot-width":25,min:0,tooltip:"always",sliderStyle:{"border-radius":0},processStyle:{backgroundImage:"-webkit-linear-gradient(left, #ffd319 20%, #ff901f 40%, #ff2975 55%, #f222ff 80%, #8c1eff 90%)"},bgStyle:{"background-color":"rgba(0,0,0,0.05)"},"tooltip-dir":"bottom","tooltip-style":{"background-color":"rgba(0,0,0,0)",border:"0",color:"black",font:"14px Arial,Helvetica,sans-serif"},value:0,formatter:function(t){var e=Math.floor(t/60),i=(t%60).toFixed();return e+":"+(i<10?"0"+i:i)}},sliderProps:{width:"100%",height:4,min:0,tooltip:"false","dot-height":4,"dot-width":25,sliderStyle:{backgroundColor:"rgba(0,0,0,0)"},processStyle:{"border-radius":"0",backgroundImage:"-webkit-linear-gradient(left, #ffd319 20%, #ff901f 40%, #ff2975 55%, #f222ff 80%, #8c1eff 90%)"},bgStyle:{"background-color":"rgba(0,0,0,0)"},"tooltip-dir":"bottom","tooltip-style":{"background-color":"rgba(0,0,0,0)",border:"0",color:"black",font:"14px Arial,Helvetica,sans-serif"},value:0,formatter:function(t){var e=Math.floor(t/60),i=(t%60).toFixed();return e+":"+(i<10?"0"+i:i)}},widthWatcherInterval:null}},created:function(){var t=this;this.$bus.$on("queue-opened",function(e){setTimeout(t.refreshSlider,400)}),this.$bus.$on("history-opened",function(e){setTimeout(t.refreshSlider,400)})},computed:{sliderPropsComputed:function(){return this.isFull?this.sliderPropsFull:this.sliderProps},duration:function(){return this.$store.state.duration},isDragging:function(){return this.$store.state.isDragging},playing:function(){return this.$store.state.playing},currentTime:{get:function(){return this.$store.state.currentTime},set:function(t){this.$store.commit("currentTime",t)}},bar_style:function(){var t=this.currentTime/this.duration*100;return t=t.toFixed(2),"width: "+Math.min(t,100)+"%;"},trackLengthTop:function(){return this.toNormalTime(this.duration)},sliderMax:function(){return Number(this.duration)},transition:function(){return this.playing?"transition: all 0.5s;":""}},watch:{duration:function(){this.$refs.slider.refresh()},isPlayerHovered:function(){this.heightChanger()},isDragging:function(t){this.heightChanger()}},methods:{refreshSlider:function(){this.$refs.slider.refresh()},widthWatcher:function(){},heightChanger:function(){this.isPlayerHovered||this.isDragging?(this.sliderProps.height=10,this.sliderProps["dot-height"]=10):(this.sliderProps.height=4,this.sliderProps["dot-height"]=4)},dragStart:function(){this.$store.commit("isDragging",!0),this.$store.commit("playing",!1)},dragEnd:function(){this.$store.commit("isDragging",!1)},click:function(){this.$store.commit("isDragging",!0),setTimeout(this.dragEnd,100)},toNormalTime:function(t){return mins=Math.floor(t/60),secs=(t%60).toFixed(),NaN!=mins&&NaN!=secs?mins+":"+(secs<10?"0"+secs:secs):""}}},oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.isFull?"full-vue-simple-progress":"vue-simple-progress"},[i("vue-slider-component",t._b({ref:"slider",attrs:{max:t.sliderMax},on:{"drag-end":t.dragEnd,"drag-start":t.dragStart},nativeOn:{mouseup:function(e){return t.click(e)}},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}},"vue-slider-component",t.sliderPropsComputed,!1)),t.isFull?t._e():i("div",{staticClass:"background-progress-bar",style:t.bar_style+t.transition})],1)},ai=[];function li(t){i("5cA5")}var ci=!1,ui=li,hi="data-v-6698bdfe",di=null,mi=Object(a["a"])(ni,oi,ai,ci,ui,hi,di),pi=mi.exports,fi={name:"top-player",components:{buttons:jt,logos:Kt,menuMore:oe,trackPerformer:ge,volumeController:Ne,audioPlayer:Qe,queue:ri,progressBar:pi},data:function(){return{isFull:!1,isHovered:!1,containerMove:{left:0,right:0},performerID:0,track:{currentID:null,nextID:null,isLiked:!1},logos:{logoLink:"",nextLogoLink:"",prevLogoLink:"",isLiked:!1,nextEnvelopeLogo:""},trackPerformer:{trackName:"",performerName:""},audio:{audioLink:""},HTTPConfig:"",isTimeout:!1}},mounted:function(){window.addEventListener("resize",this.updateContainer)},created:function(){var t=this;this.$bus.$on("track-to-queue",function(e){t.pushQueue(e.id)}),this.$bus.$on("play-track",function(e){t.playNow(e.id)}),this.$bus.$on("queue-opened",function(e){t.moveContainer("left")}),this.$bus.$on("history-opened",function(e){t.moveContainer("right")}),this.$bus.$on("set-current-track",function(e){t.historyTracks[0]&&(t.logos.logoLink=t.historyTracks[0].image_alb,t.logos.prevLogoLink=t.historyTracks[0].image_alb,t.$refs.logos.prevLogo=t.historyTracks[0].image_alb),e||(e="next");var i=t;t.$http.get("../api/tracks/"+e,{responseType:"json"}).then(function(e){i.$store.commit("pushQueueTracks",e.data),i.$http.put("../api/history",{},{responseType:"json",params:{track_id:e.data.id},headers:{"X-CSRFToken":t.$root.csrftoken}}).then(function(t){i.loadNextTrack()},function(t){i.loadNextTrack()})})})},computed:{queueTracks:{get:function(){return this.$store.state.queueTracks}},historyTracks:function(){return this.$store.state.historyTracks},current:{get:function(){return this.$store.state.currentTrack},set:function(t){this.$store.commit("currentTrack",t)}}},watch:{queueTracks:function(){this.queueTracks[0]&&(this.logos.nextLogoLink=this.queueTracks[0].image_alb,this.$refs.logos.refresh(this.logos.nextLogoLink))},isFull:function(t){t?window.addEventListener("resize",this.updateContainer):(window.removeEventListener("resize",this.updateContainer),this.containerMove={})},$route:function(){this.isFull=!1}},methods:{prevClick:function(){var t=this;if(this.historyTracks.length>0&&!this.isTimeout){this.isTimeout=!0;var e=this;setTimeout(function(){e.isTimeout=!1},1e3),this.$store.commit("unshiftQueueTracks",this.current),this.$http.get("../api/tracks/"+this.historyTracks[0].id,{responseType:"json"}).then(function(e){var i=e.body;t.setCurrentTrackAttrs(i),t.current=i,t.$store.commit("removeFirstHistoryTracks"),t.logos.prevLogoLink=t.historyTracks[0]?t.historyTracks[0].image_alb:"",t.logos.logoLink=i?i.image_alb:"",t.logos.nextLogoLink=t.queueTracks[0].image_alb,t.$bus.$emit("prev-click",t.logos)})}},playingEnded:function(){this.playNextTrack()},moveContainer:function(t){"left"===t?0===this.containerMove.left?(this.setContainer(t),this.containerMove.right=0):this.containerMove.left=0:"right"===t&&(0===this.containerMove.right?(this.setContainer(t),this.containerMove.left=0):this.containerMove.right=0)},updateContainer:function(){0!==this.containerMove.left&&this.setContainer("left"),0!==this.containerMove.right&&this.setContainer("right")},setContainer:function(t){var e=document.body.offsetWidth/2-675,i=e<0?2*(e-30)+"px":"0";"left"==t?this.containerMove.left=i:this.containerMove.right=i},pushQueue:function(t){for(var e=this,i=!0,s=0;s<this.queueTracks.length;s++)if(this.queueTracks[s].id===t){i=!1;break}i&&this.$http.get("../api/tracks/"+t,{responseType:"json"}).then(function(t){e.$store.commit("pushQueueTracks",t.data)})},playNow:function(t){var e=this;this.current.id!==t?this.$http.get("../api/tracks/"+t,{responseType:"json"}).then(function(t){e.$store.commit("unshiftQueueTracks",t.data),e.playNextTrack()}):this.$refs.audioPlayer.startPlaying()},playNextTrack:function(){if(!this.isTimeout){this.isTimeout=!0,setTimeout(this.nextTrackTimeout,1e3),this.$store.commit("pushHistoryTracks",this.current);var t=this.queueTracks[0];this.isFull&&this.$refs.logos.prepareForImmediateAnimating();var e=this;this.$http.put("../api/history",{},{responseType:"json",params:{track_id:t.id},headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(t){e.loadNextTrack()},function(t){e.loadNextTrack()})}},switchPlayerView:function(){this.isFull=!this.isFull},onLikePressed:function(){this.logos.isLiked=!this.logos.isLiked,this.likeTrack()},likeTrack:function(){var t={track_id:this.track.currentID};this.logos.isLiked?this.$http.put("../api/likes",{},{params:t,headers:{"X-CSRFToken":this.$root.csrftoken}}).then(this.successfulLikeFunc):this.$http.delete("../api/likes",{params:t,headers:{"X-CSRFToken":this.$root.csrftoken}}).then(this.successfulLikeFunc)},successfulLikeFunc:function(t){},onMouseEnter:function(){this.isHovered=!0},onMouseLeave:function(){this.isHovered=!1},nextTrackTimeout:function(){this.isTimeout=!1},loadNextTrack:function(){var t=this;this.queueTracks[1]?this.nextTrackSuccessFunc():this.$http.get("../api/tracks/next",{responseType:"json"}).then(function(e){var i=e.data;i.auto=!0,t.$store.commit("pushQueueTracks",i),t.nextTrackSuccessFunc()})},nextTrackSuccessFunc:function(){var t=this.queueTracks[0];this.queueTracks[1];this.current=t;var e=this.logos.logoLink;this.setCurrentTrackAttrs(t),this.$store.commit("removeFirstQueueTracks"),this.logos.prevLogoLink=e,this.logos.nextLogoLink=this.queueTracks[0].image_alb,this.$bus.$emit("next-track-load",this.logos)},setCurrentTrackAttrs:function(t){this.trackPerformer.trackName=t.name_trc,this.trackPerformer.performerName=t.name_per,this.performerID=t.per_id,this.audio.audioLink=t.audio_trc,this.track.currentID=t.id,document.getElementById("title").innerHTML=t.name_per+" - "+t.name_trc,this.logos.logoLink=t.image_alb,this.track.isLiked=!!t.is_liked,this.logos.isLiked=this.track.isLiked}}},gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.isFull?"full-player":"player",on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},[i("div",{class:t.isFull?"full-player-container":"player-container",style:t.containerMove},[i("buttons",{attrs:{isFull:t.isFull},on:{nextclick:t.playNextTrack,prevclick:t.prevClick,dropdownclick:t.switchPlayerView}}),i("logos",t._b({ref:"logos",attrs:{isFull:t.isFull},on:{likepressed:t.onLikePressed}},"logos",t.logos,!1)),i("menu-more",{attrs:{performerID:t.performerID,isLiked:t.logos.isLiked,isFull:t.isFull},on:{likepressed:t.onLikePressed,"show-performer":function(e){t.isFull=!1}}}),i("track-performer",t._b({attrs:{performerID:t.performerID,isFull:t.isFull}},"track-performer",t.trackPerformer,!1)),i("volume-controller",{ref:"volumeController",attrs:{isFull:t.isFull}}),i("audio-player",t._b({ref:"audioPlayer",attrs:{isFull:t.isFull},on:{playingended:t.playingEnded}},"audio-player",t.audio,!1)),i("queue",{attrs:{isFull:t.isFull}})],1),i("progress-bar",{style:t.containerMove,attrs:{isPlayerHovered:t.isHovered,isFull:t.isFull}})],1)},vi=[];function yi(t){i("hOus")}var ki=!1,bi=yi,wi="data-v-b515b44e",xi=null,_i=Object(a["a"])(fi,gi,vi,ki,bi,wi,xi),Ci=_i.exports,Si={name:"app",components:{headerContainer:p,profile:C,settings:I,mainCompilation:bt,loader:Pt,topPlayer:Ci},created:function(){var t=this;this.$http.get("../api/login").then(function(e){t.$store.commit("username",e.data.username),t.$store.commit("myPerformerID",e.data.per_id)}),this.$http.get("../api/token").then(function(t){}),this.loadFromHistory()},computed:{showLoader:function(){return this.$store.state.showLoader}},methods:{loadFromHistory:function(){var t=this,e=this;this.$http.get("../api/history").then(function(i){if(i.data[0]){for(var s=1;s<i.data.length;s++)e.$store.commit("truePushHistoryTrack",i.data[s]);t.$bus.$emit("set-current-track",i.data[0].id)}else t.$bus.$emit("set-current-track",null)},function(e){t.$bus.$emit("set-current-track",null)})}}},Ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("header-container"),t.showLoader?i("div",{staticClass:"modal",attrs:{id:"myModal"}},[i("div",{staticClass:"modal-content"},[i("loader")],1)]):t._e(),i("router-view",{on:{login:t.loadFromHistory}}),i("top-player")],1)},$i=[];function Li(t){i("+VGo")}var Ei=!1,Pi=Li,Di=null,Fi=null,Ai=Object(a["a"])(Si,Ti,$i,Ei,Pi,Di,Fi),Ii=Ai.exports,Mi=i("/ocq"),Ni=i("8+8L"),Vi=i("NYxO"),Ri=i("K/Lq"),Bi=i.n(Ri),ji={name:"registration",data:function(){return{errorMessPass2:"",errorMessUser:"",errorMessMail:"",errorMessPass1:"",errors:[],username:"",email:"",password2:"",password1:""}},methods:{inputChange:function(t){t.preventDefault(),0!=t.target.value.lenght&&(t.target.style="background-color: rgba(255,255,255,0.92);"),"username"==t.target.name?this.errorMessUser="":(this.errorMessPass1="",t.target.value==this.password2?(document.getElementById("password2").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessPass2=""):""!=this.password2&&(document.getElementById("password2").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessPass2="Пароли отличаются"))},diffrentPass:function(t){t.preventDefault(),t.target.value!=this.password1?(t.target.style="background-color: rgba(255, 179, 179,0.98)",this.errorMessPass2="Пароли отличаются"):(t.target.style="background-color: rgba(255,255,255,0.92)",this.errorMessPass2="")},sendRegistration:function(){if(this.username&&this.password1&&this.password2){var t=new FormData;t.append("username",this.username),t.append("email",this.email),t.append("password",this.password1);var e=this;this.$http.post("api/register",t,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(t){e.$store.commit("username",t.data.username),e.$router.push("performers/"+t.data.per_id),e.$store.commit("performerID",t.data.per_id),e.$store.commit("myPerformerID",t.data.per_id),e.$http.get("../api/token").then(function(t){this.$root.setToken()})},function(t){document.getElementById("username").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessUser="Это имя занято"})}this.username?(document.getElementById("username").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessUser=""):(document.getElementById("username").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessUser="Поле не может быть пустым"),this.password1?(document.getElementById("password1").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessPass1=""):(document.getElementById("password1").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessPass1="Поле не может быть пустым"),this.password2?(document.getElementById("password2").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessPass2=""):(document.getElementById("password2").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessPass2="Поле не может быть пустым")}}},qi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("form",{attrs:{method:"post"}},[i("div",{staticClass:"form",attrs:{id:"form"}},[i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",type:"text",name:"username",placeholder:"Имя пользователя"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.inputChange]}}),t.errorMessUser?i("div",{staticClass:"error",attrs:{id:"error","data-title":t.errorMessUser}}):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email",placeholder:"Эл. почта"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.errorMessMail?i("div",{staticClass:"error",attrs:{id:"error"}}):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],attrs:{id:"password1",type:"password",name:"password1",placeholder:"Пароль"},domProps:{value:t.password1},on:{input:[function(e){e.target.composing||(t.password1=e.target.value)},t.inputChange]}}),t.errorMessPass1?i("div",{staticClass:"error",attrs:{id:"error","data-title":t.errorMessPass1}}):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],attrs:{id:"password2",type:"password",name:"password2",placeholder:"Повторите пароль"},domProps:{value:t.password2},on:{input:[function(e){e.target.composing||(t.password2=e.target.value)},t.diffrentPass]}}),t.errorMessPass2?i("div",{staticClass:"error",attrs:{id:"error","data-title":t.errorMessPass2}}):t._e(),i("div",{staticClass:"border"},[i("input",{staticClass:"button",attrs:{type:"submit",name:"register",value:"Зарегистрироваться"},on:{click:function(e){return e.preventDefault(),t.sendRegistration(e)}}})]),i("hr"),i("input",{attrs:{type:"submit",name:"vk",value:"Вконтакте"}})])])])},Hi=[];function Oi(t){i("62sA")}var Wi=!1,zi=Oi,Qi="data-v-77151c4b",Gi=null,Ui=Object(a["a"])(ji,qi,Hi,Wi,zi,Qi,Gi),Xi=Ui.exports,Ki={name:"login",data:function(){return{errorMessUser:"",errorMessPass:"",username:"",password:""}},methods:{inputChange:function(t){t.preventDefault(),0!=t.target.value.lenght&&(t.target.style="background-color: rgba(255,255,255,0.92)","Кажется, вы ошиблись"==this.errorMessUser&&(this.errorMessUser="",document.getElementById("username").style.backgroundColor="rgba(255,255,255,0.92)",document.getElementById("password").style.backgroundColor="rgba(255,255,255,0.92)")),"username"==t.target.name?this.errorMessUser="":this.errorMessPass=""},sendRegistration:function(){if(this.username&&this.password){var t=new FormData;t.append("username",this.username),t.append("password",this.password);var e=this;this.$http.post("api/login",t,{headers:{"X-CSRFToken":this.$root.csrftoken}}).then(function(t){e.$store.commit("username",t.data.username),e.$router.push("performers/"+t.data.per_id),e.$store.commit("myPerformerID",t.data.per_id),e.$emit("login"),this.$http.get("../api/token").then(function(t){this.$root.setToken()})},function(t){document.getElementById("username").style.backgroundColor="rgba(255, 179, 179,0.98)",document.getElementById("password").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessUser="Кажется, вы ошиблись"})}this.username?(document.getElementById("username").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessUser=""):(document.getElementById("username").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessUser="Поле не может быть пустым"),this.password?(document.getElementById("password").style.backgroundColor="rgba(255,255,255,0.92)",this.errorMessPass=""):(document.getElementById("password").style.backgroundColor="rgba(255, 179, 179,0.98)",this.errorMessPass="Поле не может быть пустым")}}},Ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("form",{attrs:{method:"post"}},[i("div",{staticClass:"form",attrs:{id:"form"}},[i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",type:"text",name:"username",placeholder:"Имя пользователя"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.inputChange]}}),t.errorMessUser?i("div",{staticClass:"error",attrs:{id:"error","data-title":t.errorMessUser}}):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",name:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.inputChange]}}),t.errorMessPass?i("div",{staticClass:"error",attrs:{id:"error","data-title":t.errorMessPass}}):t._e(),i("div",{staticClass:"border"},[i("input",{staticClass:"button",attrs:{type:"submit",name:"register",value:"Войти"},on:{click:function(e){return e.preventDefault(),t.sendRegistration(e)}}})])])])])},Yi=[];function Zi(t){i("MjAm")}var ts=!1,es=Zi,is="data-v-20417d66",ss=null,rs=Object(a["a"])(Ki,Ji,Yi,ts,es,is,ss),ns=rs.exports;s["a"].use(Bi.a),s["a"].use(Mi["a"]),s["a"].use(Ni["a"]),s["a"].use(Vi["a"]),s["a"].config.productionTip=!1,Object.defineProperty(s["a"].prototype,"$bus",{get:function(){return this.$root.bus}});var os=new Vi["a"].Store({state:{currentTime:0,duration:0,playing:!1,volume:100,isDragging:!1,showLoader:!1,showProfile:!1,performer:{performerName:"",performerLogo:"",performerDescription:"",performerID:0},queueTracks:[],historyTracks:[],username:"",myPerformerID:0,currentTrack:null},mutations:{currentTime:function(t,e){t.currentTime=e},duration:function(t,e){t.duration=e},showLoader:function(t,e){t.showLoader=e},showProfile:function(t){t.showProfile=!t.showProfile},switchPlaying:function(t){t.playing=!t.playing},playing:function(t,e){t.playing=e},volume:function(t,e){t.volume=e},isDragging:function(t,e){t.isDragging=e},performerName:function(t,e){t.performer.performerName=e},performerLogo:function(t,e){t.performer.performerLogo=e},performerDescription:function(t,e){t.performer.performerDescription=e},performerID:function(t,e){t.performer.performerID=e},updateQueueTracks:function(t,e){t.queueTracks=e},pushQueueTracks:function(t,e){if(t.queueTracks.length>0&&!0!==e.auto){var i=t.queueTracks[t.queueTracks.length-1];!0===i.auto&&t.queueTracks.pop(),t.queueTracks.push(e),!0===i.auto&&t.queueTracks.push(i)}else t.queueTracks.push(e)},unshiftQueueTracks:function(t,e){t.queueTracks.unshift(e)},removeFirstQueueTracks:function(t){t.queueTracks.shift()},pushHistoryTracks:function(t,e){t.historyTracks.unshift(e);for(var i=9;i<t.historyTracks.length;i++)t.historyTracks.pop()},truePushHistoryTrack:function(t,e){t.historyTracks.push(e)},removeFirstHistoryTracks:function(t){t.historyTracks.shift()},username:function(t,e){t.username=e},myPerformerID:function(t,e){t.myPerformerID=e},currentTrack:function(t,e){t.currentTrack=e}}}),as=new Mi["a"]({mode:"history",routes:[{path:"/register",component:Xi},{path:"/login",component:ns},{path:"/performers/:id",name:"performer",component:C},{path:"/settings",component:I},{path:"/",component:bt}],linkActiveClass:"router-link-noob",linkExactActiveClass:"router-link-noob"});new s["a"]({data:{bus:new s["a"]({}),csrftoken:null},store:os,router:as,render:function(t){return t(Ii)},methods:{setToken:function(){this.csrftoken=this.$cookie.get("csrftoken")}},created:function(){this.setToken()}}).$mount("#app")},PDm9:function(t,e){},RmlQ:function(t,e){},RulV:function(t,e){},SHm9:function(t,e){},bO45:function(t,e){},hOus:function(t,e){},jXvU:function(t,e){},kBSv:function(t,e){},kJmn:function(t,e){},pR2j:function(t,e){},tOrc:function(t,e){},uHbV:function(t,e){},x1HC:function(t,e){}},[0]);
//# sourceMappingURL=app.5cd6285d.js.map